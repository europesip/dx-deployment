---
# Source: hcl-dx-deployment/templates/runtime-controller/runtime-controller-service-account.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service Account
# For Service: runtime-controller

apiVersion: "v1"
kind: "ServiceAccount"
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-runtime-controller-digital-experience"
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/database-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret
# For Service: People Service
apiVersion: v1
kind: Secret
metadata:
  name: dx-deployment-peopleservice-database
  annotations:
  labels:
    app: dx-deployment-peopleservice
    release: "dx-deployment"
    helm.sh/chart: peopleservice-1.0.0
    app.kubernetes.io/name: peopleservice
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  db-user: 
  db-password:
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/jwt-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret
# For Service: People Service
apiVersion: v1
kind: Secret
metadata:
  name: dx-deployment-peopleservice-jwt
  annotations:
  labels:
    app: dx-deployment-peopleservice
    release: "dx-deployment"
    helm.sh/chart: peopleservice-1.0.0
    app.kubernetes.io/name: peopleservice
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
data:
  jwtSecret:
---
# Source: hcl-dx-deployment/templates/core/core-wpsadmin-wasadmin-secret.yaml
# This template creates:
# Resources: Secret for wpsadmin user
# For Service: Core
# Initialize all variables with the default value# Check if a custom secret is used and validate secret name and data

apiVersion: "v1"
kind: "Secret"
data:
  username: "ZDNCellXUnRhVzQ9"
  password: "WmpkTVNUSkRWbDlDVHpsRGJGcDZkMGxmV2c9PQ=="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-core-wps"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/image-processor/image-processor-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret for Image processor plugin API
# For Service: image-processor

# Initialize all variables with the default value# Check if a custom secret is used and validate secret name and data
  # Use  credential from values

apiVersion: "v1"
kind: "Secret"
data:
  authenticationKey: "UGx1Z2luU2VjcmV0QXV0aEtleQ=="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-image-processor-authentication"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-connection-pool-admin-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for persistence user
# For Service: persistence

# Initialize all variables with the default value# Check if a custom secret is used and validate secret name and data
  # Use  credential from values

apiVersion: "v1"
kind: "Secret"
data:
  username: "YWRtaW4="
  password: "YWRtaW5wYXNzd29yZA=="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-persistence-connection-pool-admin"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-dam-user-secret-previous-value.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for persistence user
# For Service: persistence

# The following logic keeps the last credentials stored to use in the password change process

# Initialize all variables with the default value# Lookup the currently set credentials# Lookup the previously set credentials

# If the value defined in the custom values is still the same as the currently set values, we keep the previous values the same
# If the values changed, we store the current values in the previous values secret
# This mechanism makes sure that multiple upgrades with the same values do not overwrite the previous credentials

# Checking if validations are passed for dam user name and dam passwords.
# Comparing the  currently set value with the previous credentials. If its equal the previous values remain the same, else previous value is updated with the current credentials

# Creating a secret to store the updated previous values
apiVersion: "v1"
kind: "Secret"
data:
  username: ""
  password: ""
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-persistence-dam-user-previous-value"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-dam-user-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for persistence user
# For Service: persistence

# Initialize all variables with the default value# Check if a custom secret is used and validate secret name and data
  # Use  credential from values

apiVersion: "v1"
kind: "Secret"
data:
  username: "ZGFtdXNlcg=="
  password: "MTIzNA=="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-persistence-dam-user"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-replication-secret-previous-value.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2023. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for persistence replication user
# For Service: persistence

# The following logic keeps the last credentials stored to use in the password change process

# Initialize all variables with the default value# Lookup the currently set credentials# Lookup the previously set credentials

# If the value defined in the custom values is still the same as the currently set values, we keep the previous values the same
# If the values changed, we store the current values in the previous values secret
# This mechanism makes sure that multiple upgrades with the same values do not overwrite the previous credentials

# Checking if validations are passed for DB user name and DB passwords.
# Comparing the  currently set value with the previous credentials. If its equal the previous values remain the same, else previous value is updated with the current credentials

# Creating a secret to store the updated previous values
apiVersion: "v1"
kind: "Secret"
data:
  username: ""
  password: ""
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-persistence-replication-previous-value"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-replication-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for persistence replication user
# For Service: persistence

# Initialize all variables with the default value# Check if a custom secret is used and validate secret name and data
  # Use  credential from values

apiVersion: "v1"
kind: "Secret"
data:
  username: "cmVwZHh1c2Vy"
  password: "ZDFnaXRhbEV4cGVyaWVuY2U="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-persistence-replication"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-user-secret-previous-value.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for persistence user
# For Service: persistence

# The following logic keeps the last credentials stored to use in the password change process

# Initialize all variables with the default value# Lookup the currently set credentials# Lookup the previously set credentials

# If the value defined in the custom values is still the same as the currently set values, we keep the previous values the same
# If the values changed, we store the current values in the previous values secret
# This mechanism makes sure that multiple upgrades with the same values do not overwrite the previous credentials

# Checking if validations are passed for DB user name and DB passwords.
# Comparing the  currently set value with the previous credentials. If its equal the previous values remain the same, else previous value is updated with the current credentials

# Creating a secret to store the updated previous values
apiVersion: "v1"
kind: "Secret"
data:
  username: ""
  password: ""
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-persistence-user-previous-value"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-user-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for persistence user
# For Service: persistence

# Initialize all variables with the default value# Check if a custom secret is used and validate secret name and data
  # Use  credential from values

apiVersion: "v1"
kind: "Secret"
data:
  username: "ZHh1c2Vy"
  password: "ZDFnaXRhbEV4cGVyaWVuY2U="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-persistence-user"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-ai-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for AI configuration
# For Service: WebEngine

# Initialize variables with the default value# Check if a custom secret is used and validate secret name and data
  # Use credential from values

apiVersion: "v1"
kind: "Secret"
data:
  apiKey: ""
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-web-engine-content-ai"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-dbdomain-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for LDAP configuration
# For Service: WebEngine

apiVersion: "v1"
kind: "Secret"
data: 
  dx_dbdomain.properties: CkluaXRpYWxpemVGZWVkYmFja0RCPXRydWUKY29tbXVuaXR5LkRCQS5EYlBhc3N3b3JkPTxyZXBsYWNlLWRiLXBhc3N3b3JkPgpjb21tdW5pdHkuREJBLkRiVXNlcj08cmVwbGFjZS1kYi11c2VyPgpjb21tdW5pdHkuRGF0YVNvdXJjZU5hbWU9d3Bjb21tZGJEUwpjb21tdW5pdHkuRGJDb25maWdSb2xlTmFtZT1XUF9CQVNFX0NPTkZJR19VU0VSUwpjb21tdW5pdHkuRGJOYW1lPVdQQ09NTQpjb21tdW5pdHkuRGJOb2RlPXdwc05vZGUKY29tbXVuaXR5LkRiUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+CmNvbW11bml0eS5EYlJ1bnRpbWVQYXNzd29yZD08cmVwbGFjZS1kYi1wYXNzd29yZD4KY29tbXVuaXR5LkRiUnVudGltZVJvbGVOYW1lPVdQX0JBU0VfUlVOVElNRV9VU0VSUwpjb21tdW5pdHkuRGJSdW50aW1lVXNlcj08cmVwbGFjZS1kYi11c2VyPgpjb21tdW5pdHkuRGJTY2hlbWE9Y29tbXVuaXR5CmNvbW11bml0eS5EYlR5cGU9ZGIyCmNvbW11bml0eS5EYlVybD1qZGJjOmRiMjovLzxyZXBsYWNlLWRiLWhvc3Q+OjxyZXBsYWNlLWRiLXBvcnQ+L1dQQ09NTTpyZXR1cm5BbGlhcz0wOwpjb21tdW5pdHkuRGJVc2VyPTxyZXBsYWNlLWRiLXVzZXI+CmNvbW11bml0eS5YRGJOYW1lPVdQQ09NTQpjdXN0b21pemF0aW9uLkRCQS5EYlBhc3N3b3JkPTxyZXBsYWNlLWRiLXBhc3N3b3JkPgpjdXN0b21pemF0aW9uLkRCQS5EYlVzZXI9PHJlcGxhY2UtZGItdXNlcj4KY3VzdG9taXphdGlvbi5EYXRhU291cmNlTmFtZT13cGN1c3RkYkRTCmN1c3RvbWl6YXRpb24uRGJDb25maWdSb2xlTmFtZT1XUF9CQVNFX0NPTkZJR19VU0VSUwpjdXN0b21pemF0aW9uLkRiTmFtZT1XUENVU1QKY3VzdG9taXphdGlvbi5EYk5vZGU9d3BzTm9kZQpjdXN0b21pemF0aW9uLkRiUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+CmN1c3RvbWl6YXRpb24uRGJSdW50aW1lUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+CmN1c3RvbWl6YXRpb24uRGJSdW50aW1lUm9sZU5hbWU9V1BfQkFTRV9SVU5USU1FX1VTRVJTCmN1c3RvbWl6YXRpb24uRGJSdW50aW1lVXNlcj08cmVwbGFjZS1kYi11c2VyPgpjdXN0b21pemF0aW9uLkRiU2NoZW1hPWN1c3RvbWl6YXRpb24KY3VzdG9taXphdGlvbi5EYlR5cGU9ZGIyCmN1c3RvbWl6YXRpb24uRGJVcmw9amRiYzpkYjI6Ly88cmVwbGFjZS1kYi1ob3N0Pjo8cmVwbGFjZS1kYi1wb3J0Pi9XUENVU1Q6cmV0dXJuQWxpYXM9MDsKY3VzdG9taXphdGlvbi5EYlVzZXI9PHJlcGxhY2UtZGItdXNlcj4KY3VzdG9taXphdGlvbi5YRGJOYW1lPVdQQ1VTVApmZWVkYmFjay5EQkEuRGJQYXNzd29yZD08cmVwbGFjZS1kYi1wYXNzd29yZD4KZmVlZGJhY2suREJBLkRiVXNlcj08cmVwbGFjZS1kYi11c2VyPgpmZWVkYmFjay5EYXRhU291cmNlTmFtZT13cGZkYmtkYkRTCmZlZWRiYWNrLkRiQ29uZmlnUm9sZU5hbWU9V1BfUFpOX0NPTkZJR19VU0VSUwpmZWVkYmFjay5EYk5hbWU9V1BGREJLCmZlZWRiYWNrLkRiTm9kZT1wem5Ob2RlCmZlZWRiYWNrLkRiUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+CmZlZWRiYWNrLkRiUnVudGltZVBhc3N3b3JkPTxyZXBsYWNlLWRiLXBhc3N3b3JkPgpmZWVkYmFjay5EYlJ1bnRpbWVSb2xlTmFtZT1XUF9QWk5fUlVOVElNRV9VU0VSUwpmZWVkYmFjay5EYlJ1bnRpbWVVc2VyPTxyZXBsYWNlLWRiLXVzZXI+CmZlZWRiYWNrLkRiU2NoZW1hPWZlZWRiYWNrCmZlZWRiYWNrLkRiVHlwZT1kYjIKZmVlZGJhY2suRGJVcmw9amRiYzpkYjI6Ly88cmVwbGFjZS1kYi1ob3N0Pjo8cmVwbGFjZS1kYi1wb3J0Pi9XUEZEQks6cmV0dXJuQWxpYXM9MDsKZmVlZGJhY2suRGJVc2VyPTxyZXBsYWNlLWRiLXVzZXI+CmZlZWRiYWNrLlhEYk5hbWU9V1BGREJLCmpjci5EQkEuRGJQYXNzd29yZD08cmVwbGFjZS1kYi1wYXNzd29yZD4KamNyLkRCQS5EYlVzZXI9PHJlcGxhY2UtZGItdXNlcj4KamNyLkRhdGFTb3VyY2VOYW1lPXdwamNyZGJEUwpqY3IuRGJDb25maWdSb2xlTmFtZT1XUF9KQ1JfQ09ORklHX1VTRVJTCmpjci5EYk5hbWU9V1BKQ1IKamNyLkRiTm9kZT13cHNOb2RlCmpjci5EYlBhc3N3b3JkPTxyZXBsYWNlLWRiLXBhc3N3b3JkPgpqY3IuRGJSdW50aW1lUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+Cmpjci5EYlJ1bnRpbWVSb2xlTmFtZT1XUF9KQ1JfUlVOVElNRV9VU0VSUwpqY3IuRGJSdW50aW1lVXNlcj08cmVwbGFjZS1kYi11c2VyPgpqY3IuRGJTY2hlbWE9amNyCmpjci5EYlR5cGU9ZGIyCmpjci5EYlVybD1qZGJjOmRiMjovLzxyZXBsYWNlLWRiLWhvc3Q+OjxyZXBsYWNlLWRiLXBvcnQ+L1dQSkNSOnJldHVybkFsaWFzPTA7Cmpjci5EYlVzZXI9PHJlcGxhY2UtZGItdXNlcj4KamNyLlhEYk5hbWU9V1BKQ1IKbGlrZW1pbmRzLkRCQS5EYlBhc3N3b3JkPTxyZXBsYWNlLWRiLXBhc3N3b3JkPgpsaWtlbWluZHMuREJBLkRiVXNlcj08cmVwbGFjZS1kYi11c2VyPgpsaWtlbWluZHMuRGF0YVNvdXJjZU5hbWU9d3BsbWRiRFMKbGlrZW1pbmRzLkRiQ29uZmlnUm9sZU5hbWU9V1BfUFpOX0NPTkZJR19VU0VSUwpsaWtlbWluZHMuRGJOYW1lPVdQTE0KbGlrZW1pbmRzLkRiTm9kZT1wem5Ob2RlCmxpa2VtaW5kcy5EYlBhc3N3b3JkPTxyZXBsYWNlLWRiLXBhc3N3b3JkPgpsaWtlbWluZHMuRGJSdW50aW1lUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+Cmxpa2VtaW5kcy5EYlJ1bnRpbWVSb2xlTmFtZT1XUF9QWk5fUlVOVElNRV9VU0VSUwpsaWtlbWluZHMuRGJSdW50aW1lVXNlcj08cmVwbGFjZS1kYi11c2VyPgpsaWtlbWluZHMuRGJTY2hlbWE9bGlrZW1pbmRzCmxpa2VtaW5kcy5EYlR5cGU9ZGIyCmxpa2VtaW5kcy5EYlVybD1qZGJjOmRiMjovLzxyZXBsYWNlLWRiLWhvc3Q+OjxyZXBsYWNlLWRiLXBvcnQ+L1dQTE06cmV0dXJuQWxpYXM9MDsKbGlrZW1pbmRzLkRiVXNlcj08cmVwbGFjZS1kYi11c2VyPgpsaWtlbWluZHMuWERiTmFtZT1XUExNCnJlbGVhc2UuREJBLkRiUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+CnJlbGVhc2UuREJBLkRiVXNlcj08cmVwbGFjZS1kYi11c2VyPgpyZWxlYXNlLkRhdGFTb3VyY2VOYW1lPXdwcmVsZGJEUwpyZWxlYXNlLkRiQ29uZmlnUm9sZU5hbWU9V1BfQkFTRV9DT05GSUdfVVNFUlMKcmVsZWFzZS5EYk5hbWU9V1BSRUwKcmVsZWFzZS5EYk5vZGU9d3BzTm9kZQpyZWxlYXNlLkRiUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+CnJlbGVhc2UuRGJSdW50aW1lUGFzc3dvcmQ9PHJlcGxhY2UtZGItcGFzc3dvcmQ+CnJlbGVhc2UuRGJSdW50aW1lUm9sZU5hbWU9V1BfQkFTRV9SVU5USU1FX1VTRVJTCnJlbGVhc2UuRGJSdW50aW1lVXNlcj08cmVwbGFjZS1kYi11c2VyPgpyZWxlYXNlLkRiU2NoZW1hPXJlbGVhc2UKcmVsZWFzZS5EYlR5cGU9ZGIyCnJlbGVhc2UuRGJVcmw9amRiYzpkYjI6Ly88cmVwbGFjZS1kYi1ob3N0Pjo8cmVwbGFjZS1kYi1wb3J0Pi9XUFJFTDpyZXR1cm5BbGlhcz0wOwpyZWxlYXNlLkRiVXNlcj08cmVwbGFjZS1kYi11c2VyPgpyZWxlYXNlLlhEYk5hbWU9V1BSRUw=
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-web-engine-dbdomain"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-dbtype-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for LDAP configuration
# For Service: WebEngine

apiVersion: "v1"
kind: "Secret"
data: 
  dx_dbtype.properties: CmRiMi5EYkRyaXZlcj1jb20uaWJtLmRiMi5qY2MuREIyRHJpdmVyCmRiMi5EYkxpYnJhcnk9L29wdC9vcGVubGliZXJ0eS93bHAvdXNyL3N2cmNmZy90ZW1wbGF0ZXMvamFycy9kYjIvZGIyamNjNC5qYXIKZGIyLkpkYmNQcm92aWRlck5hbWU9d3BkYkpEQkNfZGIyCmRlcmJ5LkRiRHJpdmVyPW9yZy5hcGFjaGUuZGVyYnkuamRiYy5FbWJlZGRlZERyaXZlcgpkZXJieS5EYkxpYnJhcnk9L29wdC9IQ0wvQXBwU2VydmVyL2RlcmJ5L2xpYi9kZXJieS5qYXIKZGVyYnkuSmRiY1Byb3ZpZGVyTmFtZT13cGRiSkRCQ19kZXJieQ==
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-web-engine-dbtype"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-ldap-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret for LDAP configuration
# For Service: WebEngine# We check if the respective custom secret is used either for DX LDAP or an "other" LDAP

apiVersion: "v1"
kind: "Secret"
data:
  bindUser: "dWlkPXdwc2JpbmQsb3U9UGVvcGxlLGRjPWV1cm9wZXNpcCxkYz1jb20="
  bindPassword: "UGFzc3cwcmQ="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-web-engine-ldap"
type: "Opaque"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-wpsadmin-admin-user-secret.yaml
# This template creates:
# Resources: Secret for wpsadmin user
# For Service: WebEngine
# Initialize all variables with the default value# Check if a custom secret is used and validate secret name and data
    # Use  credential from values
  # This is only applicable in case of install

apiVersion: "v1"
kind: "Secret"
data:
  username: "d3BzYWRtaW4="
  password: "UGFzc3cwcmQ="
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-web-engine-wps"
type: "Opaque"
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/env-vars-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: People Service

apiVersion: v1
kind: ConfigMap
metadata:
  name: dx-deployment-peopleservice-env-vars-configmap
  labels:
    app: dx-deployment-peopleservice
    release: "dx-deployment"
    helm.sh/chart: peopleservice-1.0.0
    app.kubernetes.io/name: peopleservice
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
data:
  NODE_ENV: "production"
  DEBUG: "INFO:people-service:*"
  EXTERNAL_HOST: "https://"
  HTTP_SCHEME: "https"
  API_SERVICE_CONTEXT: "/dx/api/people/v1"
  CLIENT_CONTEXT: "/dx/ui/people"
  JWT_TOKEN_EXPIRY: "3600000"
  AUTH_STRATEGY: "DX"
  USER_UNIQUE_IDENTIFIER: "guid"
  PROFILE_READONLY_FIELDS_STRING: "id,firstName,lastName,displayName,organization,email,dn,managerId"
  BASE_CUSTOM_FIELDS_STRING: ""
  DX_INTEGRATION_ENABLED: "true"
  DX_USER_VALIDATION_ENDPOINT: "/auth/validate"
  DX_SESSION_COOKIE_NAME: "JSESSIONID"
  DX_CURRENT_USER_ACCESS_ENDPOINT: "/dxmyrest/access/current-user?resourceId=wps.USERS"
  DX_USER_ACCESS_PRIVILEDGED_ROLES_STRING: "Administrator,Privileged User,Editor"
  DX_USER_ACCESS_CACHE_TTL: "3600000"
  DX_USER_ACCESS_CACHE_MAX_ENTRIES: "1000"
  DX_PORTLET_PAGE_CONTEXT: "/wps/myportal/Practitioner/PeopleService"
---
# Source: hcl-dx-deployment/templates/content-composer/content-composer-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Content Composer

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-content-composer"
  labels:
    app: "dx-deployment-content-composer"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "dx.config.contentui.cors_origin": ""
  "dx.config.contentui.external_ring_api_host": ""
  "dx.config.contentui.external_ring_api_port": "443"
  "dx.config.contentui.portal_context_root": "wps"
  "dx.config.contentui.portal_host": "dx-deployment-web-engine"
  "dx.config.contentui.portal_port": "9443"
  "dx.config.contentui.ring_api_external_ssl_enabled": "true"
  "dx.config.contentui.ring_api_host": "dx-deployment-ring-api"
  "dx.config.contentui.ring_api_port": "3000"
  "dx.config.contentui.ring_api_ssl_enabled": "false"
---
# Source: hcl-dx-deployment/templates/digital-asset-management/digital-asset-management-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Digital Asset Management

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-digital-asset-management"
  labels:
    app: "dx-deployment-digital-asset-management"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "dam.config.dam.acl_cache_ttl": "10"
  "dam.config.dam.acl_traversal": "false"
  "dam.config.dam.allow_editor_to_create_collections": "true"
  "dam.config.dam.auth_cache_ttl": "600"
  "dam.config.dam.base_api_external_ssl_enabled": "true"
  "dam.config.dam.clean_up_heartbeat_interval_time_minutes": "1440"
  "dam.config.dam.core_api_context_root": "wps"
  "dam.config.dam.core_api_host": "dx-deployment-web-engine"
  "dam.config.dam.core_api_port": "3000"
  "dam.config.dam.core_api_ssl_enabled": "true"
  "dam.config.dam.cors_origin": ""
  "dam.config.dam.crop_aspect_ratio": "1:1,4:3,3:2,16:9,9:16"
  "dam.config.dam.dam_schema_migration_expired_time_in_minutes": "10"
  "dam.config.dam.db_init_by_dam": "true"
  "dam.config.dam.deployment_name": "dx-deployment"
  "dam.config.dam.enable_clean_up_or_rendition_version_regeneration_heartbeats": "false"
  "dam.config.dam.enable_root_collection_sort": "true"
  "dam.config.dam.event_list_length": "200"
  "dam.config.dam.extensibility_plugin_config.json": | 
    {
      "google-vision": {
        "actions": {
          "annotation": {
            "params": {},
            "url": "/annotation"
          }
        },
        "authKey": "PluginSecretAuthKey",
        "callBackHost": "http://dx-deployment-digital-asset-management:3000",
        "enable": false,
        "url": "http://dx-deployment-dam-plugin-google-vision:3000/dx/api/google-vision/v1/googleVisionAI"
      },
      "image-processor": {
        "actions": {
          "crop": {
            "params": {},
            "url": "/crop"
          },
          "metadata": {
            "params": {},
            "url": "/metadata"
          },
          "resize": {
            "params": {},
            "url": "/resize"
          },
          "rotate": {
            "params": {},
            "url": "/rotate"
          }
        },
        "authKey": "PluginSecretAuthKey",
        "callBackHost": "http://dx-deployment-digital-asset-management:3000",
        "enable": true,
        "url": "http://dx-deployment-image-processor:3000/dx/api/image-processor/v1/plugin"
      },
      "kaltura-plugin": {
        "actions": {
          "delete": {
            "params": {},
            "url": "/delete"
          },
          "resize": {
            "params": {},
            "url": "/resize"
          },
          "status": {
            "params": {},
            "url": "/status"
          },
          "upload": {
            "params": {},
            "url": "/upload"
          }
        },
        "authKey": "kalturaPluginSecretAuthKey",
        "callBackHost": "http://dx-deployment-digital-asset-management:3000",
        "dataUrlPattern": "https://cdnapisec.kaltura.com/p/{PARTNERID}/sp/{PARTNERID}00/playManifest/entryId/{ENTRYID}/format/url/protocol/https",
        "enable": false,
        "playerLibraryUrlPattern": "https://cdnapisec.kaltura.com/p/{PARTNERID}/sp/{PARTNERID}00/embedIframeJs/uiconf_id/{PLAYERID}/partner_id/{PARTNERID}",
        "playerid": "kalturaPluginPlayerId",
        "url": "http://dx-deployment-dam-plugin-kaltura:3000/dx/api/kaltura/v1/plugin"
      }
    }
  "dam.config.dam.extensibility_rendition_config.json": | 
    {
      "image/gif": {
        "rendition": [
          {
            "keywordStack": [
              {
                "operation": {
                  "annotation": {}
                },
                "plugin": "google-vision"
              }
            ],
            "name": "Original",
            "supplementalStack": [],
            "thumbnailStack": [],
            "transformationStack": []
          }
        ]
      },
      "image/jpeg": {
        "rendition": [
          {
            "keywordStack": [
              {
                "operation": {
                  "annotation": {}
                },
                "plugin": "google-vision"
              }
            ],
            "name": "Original",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": []
          },
          {
            "keywordStack": [],
            "name": "Desktop",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "resize": {
                    "height": 1080,
                    "width": 1920
                  }
                },
                "plugin": "image-processor"
              }
            ]
          },
          {
            "keywordStack": [],
            "name": "Tablet",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "resize": {
                    "height": 768,
                    "width": 1024
                  }
                },
                "plugin": "image-processor"
              }
            ]
          },
          {
            "keywordStack": [],
            "name": "Smartphone",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "resize": {
                    "height": 760,
                    "width": 360
                  }
                },
                "plugin": "image-processor"
              }
            ]
          }
        ]
      },
      "image/png": {
        "rendition": [
          {
            "keywordStack": [
              {
                "operation": {
                  "annotation": {}
                },
                "plugin": "google-vision"
              }
            ],
            "name": "Original",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": []
          },
          {
            "keywordStack": [],
            "name": "Desktop",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "resize": {
                    "height": 1080,
                    "width": 1920
                  }
                },
                "plugin": "image-processor"
              }
            ]
          },
          {
            "keywordStack": [],
            "name": "Tablet",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "resize": {
                    "height": 768,
                    "width": 1024
                  }
                },
                "plugin": "image-processor"
              }
            ]
          },
          {
            "keywordStack": [],
            "name": "Smartphone",
            "supplementalStack": [
              {
                "operation": {
                  "metadata": {}
                },
                "plugin": "image-processor"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "crop": {
                    "region": "CENTER"
                  }
                },
                "plugin": "image-processor"
              },
              {
                "operation": {
                  "resize": {
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "image-processor"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "resize": {
                    "height": 760,
                    "width": 360
                  }
                },
                "plugin": "image-processor"
              }
            ]
          }
        ]
      },
      "image/svg+xml": {
        "rendition": [
          {
            "keywordStack": [],
            "name": "Original",
            "supplementalStack": [],
            "thumbnailStack": [],
            "transformationStack": []
          }
        ]
      },
      "image/tiff": {
        "rendition": [
          {
            "keywordStack": [],
            "name": "Original",
            "supplementalStack": [],
            "thumbnailStack": [],
            "transformationStack": []
          }
        ]
      },
      "video/mp4": {
        "rendition": [
          {
            "keywordStack": [],
            "name": "Original",
            "supplementalStack": [
              {
                "operation": {
                  "status": {
                    "entryId": ""
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "resize": {
                    "entryId": "",
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "upload": {
                    "mediaId": ""
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ]
          }
        ]
      },
      "video/ogg": {
        "rendition": [
          {
            "keywordStack": [],
            "name": "Original",
            "supplementalStack": [
              {
                "operation": {
                  "status": {
                    "entryId": ""
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "resize": {
                    "entryId": "",
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "upload": {
                    "mediaId": ""
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ]
          }
        ]
      },
      "video/webm": {
        "rendition": [
          {
            "keywordStack": [],
            "name": "Original",
            "supplementalStack": [
              {
                "operation": {
                  "status": {
                    "entryId": ""
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ],
            "thumbnailStack": [
              {
                "operation": {
                  "resize": {
                    "entryId": "",
                    "height": 192,
                    "width": 192
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ],
            "transformationStack": [
              {
                "operation": {
                  "upload": {
                    "mediaId": ""
                  }
                },
                "plugin": "kaltura-plugin"
              }
            ]
          }
        ]
      }
    }
  "dam.config.dam.external_base_api_host": ""
  "dam.config.dam.external_base_api_port": "443"
  "dam.config.dam.external_image_processor_api_host": ""
  "dam.config.dam.external_image_processor_api_port": "443"
  "dam.config.dam.external_ring_api_host": ""
  "dam.config.dam.external_ring_api_port": "443"
  "dam.config.dam.failed_operation_threshold_limit_records": "20000"
  "dam.config.dam.failed_operation_threshold_time_hours": "24"
  "dam.config.dam.friendly_url_context_root": ""
  "dam.config.dam.image_processor_api_external_ssl_enabled": "true"
  "dam.config.dam.image_processor_api_host": "dx-deployment-image-processor"
  "dam.config.dam.image_processor_api_port": "3000"
  "dam.config.dam.image_processor_api_ssl_enabled": "false"
  "dam.config.dam.internal_base_api_host": "dx-deployment-digital-asset-management"
  "dam.config.dam.internal_base_api_port": "3000"
  "dam.config.dam.last_scan_threshold_time_minutes": "360"
  "dam.config.dam.ltpa_token_refresh_time_in_minutes": "5"
  "dam.config.dam.max_age": "600"
  "dam.config.dam.max_bulk_upload_without_warning": "100"
  "dam.config.dam.max_records_to_compare": "10000"
  "dam.config.dam.max_validation_processing_limit": "100"
  "dam.config.dam.media_creation_threshold_time_minutes": "1440"
  "dam.config.dam.node_request_timeout_in_minutes": "15"
  "dam.config.dam.operation_clean_up_heart_beat_interval": "0"
  "dam.config.dam.operation_timeout": "30"
  "dam.config.dam.operation_worker_limit": "10"
  "dam.config.dam.orphan_data_and_file_cleanup_heartbeat_interval_time_minutes": "1440"
  "dam.config.dam.orphan_directory_modification_threshold_time_minutes": "1440"
  "dam.config.dam.orphan_media_storage_creation_threshold_time_minutes": "1440"
  "dam.config.dam.postgres_db_host": "dx-deployment-persistence"
  "dam.config.dam.postgres_db_name": "dxmediadb"
  "dam.config.dam.postgres_db_port": "5432"
  "dam.config.dam.postgres_db_ssl": "false"
  "dam.config.dam.render_new_ui": "true"
  "dam.config.dam.rendition_or_version_heartbeat_interval_time_minutes": "60"
  "dam.config.dam.ring_api_external_ssl_enabled": "true"
  "dam.config.dam.ring_api_host": "dx-deployment-ring-api"
  "dam.config.dam.ring_api_port": "3000"
  "dam.config.dam.ring_api_ssl_enabled": "false"
  "dam.config.dam.search_middleware_content_source_id": ""
  "dam.config.dam.search_middleware_external_port": ""
  "dam.config.dam.search_middleware_external_ssl_enabled": "false"
  "dam.config.dam.search_middleware_host": ""
  "dam.config.dam.search_middleware_is_enabled": "false"
  "dam.config.dam.search_middleware_ssl_enabled": "false"
  "dam.config.dam.staging_dam_api_host": ""
  "dam.config.dam.staging_dam_api_port": "443"
  "dam.config.dam.staging_dam_api_ssl_enabled": "true"
  "dam.config.dam.staging_ring_api_host": ""
  "dam.config.dam.staging_ring_api_port": "443"
  "dam.config.dam.staging_ring_api_ssl_enabled": "true"
  "dam.config.dam.static_max_age": "86400"
  "dam.config.dam.validation_heartbeat_interval_time_minutes": "10"
---
# Source: hcl-dx-deployment/templates/global/global-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: All Services

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-global"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
# Log levels can be defined as arrays or strings (deprecated). We join to handle arrays. Strings will pass through this unchanged.
  "log.contentComposer": "api:server-v1:*=info"
  "log.damPluginGoogleVision": "api:server-v1:*=info"
  "log.damPluginKaltura": "api:server-v1:*=info"
  "log.digitalAssetManagement": "api:server-v1:*=info,worker:server-v1:*=info"
  "log.haproxy": "haproxy:=info"
  "log.imageProcessor": "api:server-v1:*=info"
  "log.licenseManager": "license-check:.*=INFO,license-check:com.hcl.dx.*=INFO"
  "log.persistenceConnectionPool": "pgpool:=info"
  "log.persistenceNode": "psql:=info,repmgr:=info"
  "log.ringApi": "api:server-v1:*=info"
  "log.runtimeController": "controller:.*=INFO,controller:com.hcl.dx.*=INFO"
  "log.webEngine": "*=info,com.ibm.wps.logging.ExceptionLogger=all"
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Configmap
# For Service: HAProxy

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-haproxy"
  labels:
    app: "dx-deployment-haproxy"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "dx.config.haproxy.cfg": |
    global
      stats socket ipv4@*:9999 mode 660 level admin expose-fd listeners
      maxconn 50000
      log stdout format raw local0 info
      nbthread 4
  
    defaults
      timeout connect 10s
      timeout client 1200s
      timeout server 1200s
      log global
      mode http
      option httplog
      # If a core server goes down we allow connecting to other servers even if stickyness would prevent that
      option redispatch
      balance leastconn
      # Default http log format with IP removed
      log-format "[%tr] %ft %b/%s %TR/%Tw/%Tc/%Tr/%Ta %ST %B %CC %CS %tsc %ac/%fc/%bc/%sc/%rc %sq/%bq %hr %hs %{+Q}r"
  
    # Mock frontend returning a 200 code for the probes once HAProxy is up
    frontend probe
      # We disable logging for the probe frontend to not pollute the log
      no log
      bind :10001
      http-request return status 200 content-type "text/plain" string "OK"
  
    frontend metrics
      bind *:8404
      http-request use-service prometheus-exporter if { path /metrics }
      stats enable
      stats uri /stats
      stats refresh 10s
  
    # We create a peer section only pointing to the current instance. This persists stick tables during a config reload as the new process reads the tables from the old process
    peers localPeer
      peer local 127.0.0.1:10000
  
    frontend dx
      bind :8081 ssl crt /etc/ssl/certs/tls.crt 
  
      # HTTP Strict Transport Security(HSTS)
      http-response set-header Strict-Transport-Security "max-age=31536000;"
  
      use_backend dam if { path -m reg ^/dx/(api|ui)/dam/ }
      use_backend dam if { path_beg /dx/ui/picker/ }
      use_backend content if { path_beg /dx/ui/content/ }
      use_backend image-processor if { path_beg /dx/api/image-processor/ }
      use_backend ring-api if { path_beg /dx/api/core/ }
      stick-table type string len 180 size 32m expire 30m store http_req_rate(30m),gpc0 peers localPeer
      http-request set-header X-Concat --%[src]_%[req.fhdr(User-Agent)]_%[req.fhdr(X-Forwarded-For,-1)]--
      http-request track-sc0 req.fhdr(X-Concat)
  
  
      use_backend runtime-controller  if { path_beg /dx/api/runtime-controller/ }
      use_backend people-service-ui if is_custom_people_ui_path
      use_backend people-service-api if is_custom_people_api_path
  
      default_backend web-engine-dx-home
  
    # Define DNS resolver for core headless services
    resolvers kube-dns
      # Use the Pod's /etc/resolv.conf file (created by Kubernetes) to define the nameserver
      parse-resolv-conf
      accepted_payload_size 8192
    
    backend web-engine-dx-home
      acl has_oidc_set_cookie res.hdr(Set-Cookie) -m reg ^OIDCSTATE
      acl has_saml_set_cookie res.hdr(Set-Cookie) -m reg ^WasSamlAcsID
      dynamic-cookie-key dx-deployment
      acl path_metrics path -i /metrics
      http-request deny if path_metrics
      # Set CSP frame-ancestors if URLs are provided
      # We use this workaround to create a second cookie when certain cookies are present
      # The new cookie will be used to handle the stickyness. This prevents the actual cookie value from being altered.
      # The cookie is created with a placeholder value and is rewritten by HAProxy
      http-response add-header Set-Cookie DxSessionAffinity=placeholder_value;\ path=/;\ HttpOnly;\ Secure;\ SameSite= if { res.cook(JSESSIONID) -m found } || has_oidc_set_cookie || has_saml_set_cookie
      cookie DxSessionAffinity rewrite dynamic  nocache
      default-server ssl check verify none
      # Setting server template "num" parameter to highest number among `maxReplica`, `replica`, and 99. `maxReplica` and `replica` would be considered from the Helm values.
      # The purpose to set the higher number of server template is to cover for auto-scaling of the core pods.
      # We do not want to set this number too high as Prometheus is scraping all servers which are specified to `server-template` whether it's assigned to any pods or not.
      server-template web-engine-dx-home 99 dx-deployment-web-engine-headless.digital-experience.svc.cluster.local:9443 check resolvers kube-dns init-addr none
  
    backend core-dx-home
      acl has_oidc_set_cookie res.hdr(Set-Cookie) -m reg ^OIDCSTATE
      acl has_saml_set_cookie res.hdr(Set-Cookie) -m reg ^WasSamlAcsID
      dynamic-cookie-key dx-deployment
      # Set CSP frame-ancestors if URLs are provided
      # We use this workaround to create a second cookie when certain cookies are present
      # The new cookie will be used to handle the stickyness. This prevents the actual cookie value from being altered.
      # The cookie is created with a placeholder value and is rewritten by HAProxy
      http-response add-header Set-Cookie DxSessionAffinity=placeholder_value;\ path=/;\ HttpOnly;\ Secure;\ SameSite= if { res.cook(JSESSIONID) -m found } || has_oidc_set_cookie || has_saml_set_cookie
      cookie DxSessionAffinity rewrite dynamic  nocache
      default-server ssl check verify none
      # Setting server template "num" parameter to highest number among `maxReplica`, `replica`, and 99. `maxReplica` and `replica` would be considered from the Helm values.
      # The purpose to set the higher number of server template is to cover for auto-scaling of the core pods.
      # We do not want to set this number too high as Prometheus is scraping all servers which are specified to `server-template` whether it's assigned to any pods or not.
      server-template core-dx-home 99 dx-deployment-core-headless.digital-experience.svc.cluster.local:10042 check resolvers kube-dns init-addr none
    backend core-was-admin
      dynamic-cookie-key dx-deployment
      # We use this workaround to create a second cookie when JSESSIONID is present
      # The new cookie will be used to handle the stickyness. This prevents the actual JSESSIONID value from being altered
      http-response add-header Set-cookie DxSessionAffinity=placeholder_value;\ path=/;\ HttpOnly;\ Secure;\ SameSite= if { res.cook(JSESSIONID) -m found }
      cookie DxSessionAffinity rewrite dynamic  nocache
      default-server ssl check verify none
      # Setting server template "num" parameter to highest number among `maxReplica`, `replica`, and 99. `maxReplica` and `replica` would be considered from the Helm values.
      # The purpose to set the higher number of server template is to cover for auto-scaling of the core pods.
      # We do not want to set this number too high as Prometheus is scraping all servers which are specified to `server-template` whether it's assigned to any pods or not.
      server-template core-was-admin 99 dx-deployment-core-headless.digital-experience.svc.cluster.local:10041 check resolvers kube-dns init-addr none
    backend core-dxconnect
      dynamic-cookie-key dx-deployment
      # We use this workaround to create a second cookie when CWSession4 is present
      # The new cookie will be used to handle the stickyness. This prevents the actual CWSession4 value from being altered
      http-response add-header Set-cookie CwSessionAffinity=%[res.cook(CWSession4)];\ path=/ if { res.cook(CWSession4) -m found }
      cookie CwSessionAffinity rewrite dynamic nocache
      default-server ssl check verify none
      # Setting server template "num" parameter to highest number among `maxReplica`, `replica`, and 99. `maxReplica` and `replica` would be considered from the Helm values.
      # The purpose to set the higher number of server template is to cover for auto-scaling of the core pods.
      # We do not want to set this number too high as Prometheus is scraping all servers which are specified to `server-template` whether it's assigned to any pods or not.
      server-template core-dxconnect 99 dx-deployment-core-headless.digital-experience.svc.cluster.local:10202 check resolvers kube-dns init-addr none
  
    backend core-cw-home
      default-server ssl check verify none
      # For Config Wizard we always connect to the first Core Pod (core-0). Requests will be forwarded even when the Pod is unready to allow Config Wizard to keep communicating during restarts.
      server-template core-cw-home 1 dx-deployment-core-unready-pod-0.digital-experience.svc.cluster.local:10202 check resolvers kube-dns init-addr none
  
    frontend cw-admin-sec
      mode tcp
      option tcplog
      # Default tcp log format with IP removed
      log-format "[%t] %ft %b/%s %Tw/%Tc/%Tt %B %ts %ac/%fc/%bc/%sc/%rc %sq/%bq"
      bind :10203 ssl crt /etc/ssl/certs/tls.crt 
      default_backend cw-admin-sec
  
    backend cw-admin-sec
      dynamic-cookie-key dx-deployment
      # We use this workaround to create a second cookie when JSESSIONID is present
      # The new cookie will be used to handle the stickyness. This prevents the actual JSESSIONID value from being altered
      http-response add-header Set-cookie CwAdminSessionAffinity=%[res.cook(JSESSIONID)];\ path=/ if { res.cook(JSESSIONID) -m found }
      cookie CwAdminSessionAffinity rewrite dynamic nocache
      default-server ssl check verify none
      # Setting server template "num" parameter to highest number among `maxReplica`, `replica`, and 99. `maxReplica` and `replica` would be considered from the Helm values.
      # The purpose to set the higher number of server template is to cover for auto-scaling of the core pods.
      # We do not want to set this number too high as Prometheus is scraping all servers which are specified to `server-template` whether it's assigned to any pods or not.
      server-template cw-admin-sec 99 dx-deployment-core-headless.digital-experience.svc.cluster.local:10203 check resolvers kube-dns init-addr none
    frontend remote-search-frontend
      mode tcp
      option tcplog
      # Default tcp log format with IP removed
      log-format "[%t] %ft %b/%s %Tw/%Tc/%Tt %B %ts %ac/%fc/%bc/%sc/%rc %sq/%bq"
      bind :9043 ssl crt /etc/ssl/certs/tls.crt 
      default_backend remote-search
  
    backend remote-search
      server-template remote-search 1 dx-deployment-remote-search.digital-experience.svc.cluster.local:9043 ssl check verify none resolvers kube-dns init-addr none
  
    defaults
      timeout connect 10s
      timeout client 1200s
      timeout server 1200s
      log global
      mode http
      option httplog
    backend dam
      server-template dam 1 dx-deployment-digital-asset-management.digital-experience.svc.cluster.local:3000 check resolvers kube-dns init-addr none
  
    backend content
      server-template content 1 dx-deployment-content-composer.digital-experience.svc.cluster.local:3000 check resolvers kube-dns init-addr none
  
    backend image-processor
      server-template image-processor 1 dx-deployment-image-processor.digital-experience.svc.cluster.local:3000 check resolvers kube-dns init-addr none
  
    backend runtime-controller
      server-template runtime-controller 1 dx-deployment-runtime-controller.digital-experience.svc.cluster.local:3000 check resolvers kube-dns init-addr none
  
    backend ring-api
      server-template ring-api 1 dx-deployment-ring-api.digital-experience.svc.cluster.local:3000 check resolvers kube-dns init-addr none
  
    backend people-service-ui
       server-template people-server-ui 1 dx-deployment-peopleservice.digital-experience.svc.cluster.local:3000 check resolvers kube-dns init-addr none
  
    backend people-service-api
      server-template people-server-api 1 dx-deployment-peopleservice.digital-experience.svc.cluster.local:3000 check resolvers kube-dns init-addr none
---
# Source: hcl-dx-deployment/templates/image-processor/image-processor-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Image Processor

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-image-processor"
  labels:
    app: "dx-deployment-image-processor"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "dam.config.dam.imgprocessor.cors_origin": ""
---
# Source: hcl-dx-deployment/templates/persistence/persistence-connection-pool-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Persistence Connection Pool

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-persistence-connection-pool"
  labels:
    app: "dx-deployment-persistence-connection-pool"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "dam.config.dam.persistence.pgpool_max_pool": "15"
  "dam.config.dam.persistence.pgpool_num_init_children": "64"
  "dam.config.dam.persistence.pgpool_sr_check_database": "repmgr"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-node-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: PG Repmanager

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-persistence-node"
  labels:
    app: "dx-deployment-persistence-node"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "dam.config.dam.persistence.postgres_db": "dxmediadb"
  "dam.config.dam.persistence.postgres_max_connections": "1000"
  "dam.config.dam.persistence.postgres_wal_keep_segments": "64"
  "dam.config.dam.persistence.postgres_wal_senders": "5"
  "dam.config.dam.persistence.replication_db": "repmgr"
  "dam.config.dam.persistence.repmgr_port_number": "5432"
  "dam.config.dam.persistence.synchronous_commit": "remote_apply"
  "dam.config.dam.persistence.synchronous_standby_names": ""
  "dam.config.dam.persistence.validation_sleep_timer": "120"
---
# Source: hcl-dx-deployment/templates/ring-api/ring-api-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: RingAPI

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-ring-api"
  labels:
    app: "dx-deployment-ring-api"
    # Using general labels, see _helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "dx.config.experienceapi.cors_origin": ""
  "dx.config.experienceapi.portal_context_root": "wps"
  "dx.config.experienceapi.portal_host": "dx-deployment-web-engine"
  "dx.config.experienceapi.portal_personalized_home": "myportal"
  "dx.config.experienceapi.portal_port": "9443"
  "dx.config.experienceapi.portal_ssl_enabled": "true"
---
# Source: hcl-dx-deployment/templates/runtime-controller/runtime-controller-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Runtime Controller

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-runtime-controller"
  labels:
    app: "dx-deployment-runtime-controller"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  
  "configmapRecycle.affectedResources.deployment": "content-composer,image-processor,ring-api"
  "configmapRecycle.affectedResources.statefulset": "core,digital-asset-management,persistence-ro,persistence-rw,remote-search"
  "configmapRecycle.enable": "true"
  "persistentFailover.enable": "true"
  "runtimecontroller.config.imageTagChecksum": "4890f28ee947d1fe47a79a89143a5b6f53377e4008ec8a95e8c4e2498dd8fe06"
  "runtimecontroller.config.runtime_controller_lease_expiry_time": "15"
  "runtimecontroller.config.runtime_controller_lease_polling_time": "5"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: WebEngine

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-web-engine"
  labels:
    app: "dx-deployment-web-engine"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  "core.config.ai_enabled": "false"
  "core.config.authoring": "true"
  "core.config.cc_enabled": "true"
  "core.config.cc_url": "/dx/ui/content/static"
  "core.config.content_ai_provider": "OPEN_AI"
  "core.config.context_root": "wps"
  "core.config.custom_ai_classname": ""
  "core.config.dam_enabled": "true"
  "core.config.dam_url": "/dx/ui/dam/static"
  "core.config.deployment_type": "helm"
  "core.config.drop_database_tables": "false"
  "core.config.dxpicker_enabled": "true"
  "core.config.dxpicker_url": "/dx/ui/picker/static"
  "core.config.home_path": "portal"
  "core.config.host_name": "dx.apps.promox.europesip-lab.com"
  "core.config.ldap_attribute_mapping_ldap": "mail,title,userPassword"
  "core.config.ldap_attribute_mapping_portal": "ibm-primaryEmail,ibm-jobTitle,password"
  "core.config.ldap_attribute_non_supported": "certificate,members"
  "core.config.ldap_enabled": "true"
  "core.config.ldap_host": "ldap.europesip-lab.com"
  "core.config.ldap_id": "dx_ldap"
  "core.config.ldap_port": "389"
  "core.config.ldap_server_type": "Custom"
  "core.config.ldap_suffix": "dc=europesip,dc=com"
  "core.config.metrics_enabled": "true"
  "core.config.people_service_context_root_api": "/dx/api/people/v1"
  "core.config.people_service_context_root_portlet": "/wps/myportal/Practitioner/PeopleService"
  "core.config.people_service_context_root_ui": "/dx/ui/people"
  "core.config.people_service_enabled": "true"
  "core.config.people_service_webresources_uri": "http://dx-deployment-peopleservice:3000/dx/ui/people"
  "core.config.personalized_path": "myportal"
  "core.config.search_middleware_context_root_api": "/dx/api/search"
  "core.config.search_middleware_context_root_picker_ui": "/dx/ui/search/picker"
  "core.config.search_middleware_enabled": "false"
  "core.config.search_middleware_version": "v2"
  "core.config.search_ui_v2_enabled": "false"
  "core.config.use_external_database": "false"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-jvm-options-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates: if Web Engine is enabled
# Resources: jvm.options
# For Service: WebEngine
apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-web-engine-jvm-options"
  labels:
    app: "dx-deployment-web-engine"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  jvm.options: |
    -Dicm.config.file.dir=./libraries/dxcoreLib/com/ibm/icm/icm.properties
    -noverify
    -Xms2560m
    -Xmn1024m
    -Xlog:gc*:file=verbosegc.log:time
    -Dfile.encoding=UTF-8
    -Ddefault.client.encoding=UTF-8
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-overrides-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: WebEngine

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-web-engine-overrides"
  labels:
    app: "dx-deployment-web-engine"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
  ldap-config.xml: |
    <server description="WebEngineServer">
      <ldapRegistry id="ldap" realm="SampleLdapIDSRealm"
        host='ldap.europesip-lab.com'
        port='389' ignoreCase="true"
        baseDN='dc=europesip,dc=com'
        ldapType='Custom'
        sslEnabled='false'
        bindDN='${LDAP_BIND_USER}'
        bindPassword='${LDAP_BIND_PASSWORD}'>
        <customFilters
          userFilter="(&amp;(uid=%v)(objectclass=inetOrgPerson))"
          groupFilter="(&amp;(cn=%v)(objectclass=groupOfUniqueNames))"
          userIdMap="*:uid"
          groupIdMap="*:cn"
          groupMemberIdMap="groupOfUniqueNames:uniqueMember">
        </customFilters>
        <ldapCache>
          <attributesCache size="4000" sizeLimit="4000" timeout="2400s" />
          <searchResultsCache resultsSizeLimit="4000" size="4000" timeout="2400s" />
        </ldapCache>
        <contextPool preferredSize="20"/>
        <attributeConfiguration>
          <attribute name="mail" propertyName="ibm-primaryEmail" entityType="PersonAccount"/>
          <attribute name="title" propertyName="ibm-jobTitle" entityType="PersonAccount"/>
        </attributeConfiguration>
      </ldapRegistry>
      <federatedRepository>
        <primaryRealm name="FederatedRealm" allowOpIfRepoDown="true">
          <participatingBaseEntry name="o=defaultWIMFileBasedRealm"/>
          <participatingBaseEntry name='dc=europesip,dc=com' />
        </primaryRealm>
      </federatedRepository>
    </server>

# DO NOT CHANGE THE INDENTATION BELOW
  # We make sure that the file is always mounted as .xml. Otherwise it is not picked up by Web Engine server
  ldapOverride.xml: |
    <server description="WebEngineServer">
      <ldapRegistry id="ldap" realm="SampleLdapIDSRealm"
        host="ldap.europesip-lab.com" port="636" ignoreCase="true"
        baseDN="dc=europesip,dc=com"
        ldapType="Custom"
        sslEnabled="true"
        sslRef="customSSLConfig"
        bindDN="uid=wpsbind,ou=People,dc=europesip,dc=com"
        bindPassword="Passw0rd">
    
        <customFilters
          userFilter="(&amp;(|(uid=%v)(mail=%v))(objectclass=inetOrgPerson))"
          groupFilter="(&amp;(cn=%v)(|(objectclass=groupOfNames)(objectclass=groupOfUniqueNames)))"
          userIdMap="*:uid"
          groupIdMap="*:cn"
          groupMemberIdMap="ibm-allGroups:member;ibm-allGroups:uniqueMember;groupOfNames:member;groupOfUniqueNames:uniqueMember">
        </customFilters>
    
        <attributeConfiguration>
          <attribute name="mail" propertyName="ibm-primaryEmail" entityType="PersonAccount"/>
          <attribute name="title" propertyName="ibm-jobTitle" entityType="PersonAccount"/>
        </attributeConfiguration>
    
      </ldapRegistry>
      <federatedRepository>
         <primaryRealm name="FederatedRealm" allowOpIfRepoDown="true">
            <participatingBaseEntry name="o=defaultWIMFileBasedRealm"/>
            <participatingBaseEntry name="dc=europesip,dc=com"/>
         </primaryRealm>
      </federatedRepository>
    </server>
    
  # We make sure that the file is always mounted as .xml. Otherwise it is not picked up by Web Engine server
  user-overrides.xml: |
    <server description="DX Web Engine server">
    <basicRegistry id="basic" realm="defaultWIMFileBasedRealm">
    <user name="wpsadmin" password="Passw0rd" id="uid=wpsadmin,o=defaultWIMFileBasedRealm" />
    <user name="admin1" password="admin2pwd" id="uid=admin1,o=defaultWIMFileBasedRealm"/>
    <group name="wpsadmins" id="cn=wpsadmins,o=defaultWIMFileBasedRealm">
       <member name="andres"/>
       <member name="wpsadmin" />
    </group>
    </basicRegistry>
    </server>
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-properties-overrides-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024 All Rights Reserved.        *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: WebEngine

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-web-engine-properties-overrides"
  labels:
    app: "dx-deployment-web-engine"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
data:
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/pvc.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: PersistentVolumeClaim
# For Service: People Service

apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: dx-deployment-peopleservice-data
  annotations:  
  labels:
    app: dx-deployment-peopleservice
    release: "dx-deployment"
    helm.sh/chart: peopleservice-1.0.0
    app.kubernetes.io/name: peopleservice
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  accessModes: 
    - ReadWriteMany
  resources:
    requests:
      storage: 1Gi
  storageClassName: manual
---
# Source: hcl-dx-deployment/templates/digital-asset-management/digital-asset-management-pvc.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: PersistentVolumeClaim
# For Service: Digital Asset Management

# Only deploy if Digital Asset Management is enabled

kind: "PersistentVolumeClaim"
apiVersion: "v1"
metadata:
  name: "dx-deployment-digital-asset-management"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  accessModes:
    - "ReadWriteMany"
  resources:
    requests:
      storage: "2Gi"
  storageClassName: "dx-deploy-rwx"
---
# Source: hcl-dx-deployment/templates/runtime-controller/runtime-controller-role.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Role
# For Service: runtime-controller

apiVersion: "rbac.authorization.k8s.io/v1"
kind: "Role"
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-runtime-controller-digital-experience"
rules:
# ConfigMap access is used to read log level configuration and to store the DB state
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
# Deployment access is used to monitor the persistence layer
- apiGroups:
  - "apps"
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
  - update
# StatefulSet access is used to monitor the persistence layer
- apiGroups:
  - "apps"
  resources:
  - statefulsets
  verbs:
  - get
  - list
  - watch
  - update
# Services access is used to perform checks for traffic routing to the RTC
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
  - update
# Endpoints are used to control traffic flow going to the RTC leader
- apiGroups:
  - ""
  resources:
  - endpoints
  verbs:
  - get
  - list
  - watch
  - update
  - create
- apiGroups:
  - ""
  resources:
  - pods
  verbs:
  - get
  - list
# This is needed by RTC to validate credentials using Kubectl Exec and perform actions in the persistence layer
- apiGroups:
  - ""
  resources:
  - pods/exec
  verbs:
  - get
  - create
  - update
# This is needed by RTC to verify admin username through secret
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - update
  - patch 
  - create
  - list
# Used to perform and persist leader election within the RTC
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
# Used to manage the EndpointSlices for RTC routing
- apiGroups:
  - discovery.k8s.io
  resources:
  - endpointslices
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - delete
# Used to access the previously configured replica settings of the persistence layer via ControllerRevisions
- apiGroups:
  - apps
  resources:
  - controllerrevisions
  verbs:
  - get
  - list
  - watch
---
# Source: hcl-dx-deployment/templates/runtime-controller/runtime-controller-role-binding.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Role Binding
# For Service: runtime-controller

apiVersion: "rbac.authorization.k8s.io/v1"
kind: "RoleBinding"
metadata:
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  name: "dx-deployment-runtime-controller-digital-experience"
roleRef:
  apiGroup: "rbac.authorization.k8s.io"
  kind: "Role"
  name: "dx-deployment-runtime-controller-digital-experience"
subjects:
- kind: "ServiceAccount"
  name: "dx-deployment-runtime-controller-digital-experience"
  namespace: "digital-experience"
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: People Service

apiVersion: v1
kind: Service
metadata:
  name: dx-deployment-peopleservice
  annotations:  
  labels:
    app: dx-deployment-peopleservice
    release: "dx-deployment"
    helm.sh/chart: peopleservice-1.0.0
    app.kubernetes.io/name: peopleservice
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports: 
    - name: http
      protocol: TCP
      port: 3000
      targetPort: 3000
  selector:
    app: dx-deployment-peopleservice
---
# Source: hcl-dx-deployment/templates/content-composer/content-composer-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: Content Composer

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-content-composer"
  annotations:
  labels:
    app: "dx-deployment-content-composer"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "content-composer"
      port: 3000
  selector:
    app: "dx-deployment-content-composer"
---
# Source: hcl-dx-deployment/templates/digital-asset-management/digital-asset-management-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: Digital Asset Management

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-digital-asset-management"
  annotations:
  labels:
    app: "dx-deployment-digital-asset-management"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "digital-asset-management"
      port: 3000
  selector:
    app: "dx-deployment-digital-asset-management"
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-service-headless.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

apiVersion: "v1"
kind: "Service"
metadata:
  annotations:
  name: "dx-deployment-haproxy-headless"
  labels:
    app: "dx-deployment-haproxy-headless"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  # We want to publish the Pod addresses as soon as possible as HAProxy uses them to resolve the peers
  publishNotReadyAddresses: true
  type: "ClusterIP"
  clusterIP: "None"
  ports:
    - name: "haproxy"
      port: 8081
  selector:
    app: "dx-deployment-haproxy"
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: HAProxy

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-haproxy"
  annotations:
  labels:
    app: "dx-deployment-haproxy"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "haproxy"
      port: 443
      targetPort: 8081
      # This is a workaround to enable the switch from LoadBalancer (which has a nodePort fields defined) to ClusterIP (which does not allow those fields)
      nodePort: null
    
    - port: 10203
      name: "cw-admin-sec"
     
  selector:
    app: "dx-deployment-haproxy"
---
# Source: hcl-dx-deployment/templates/image-processor/image-processor-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: image-processor

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-image-processor"
  annotations:
  labels:
    app: "dx-deployment-image-processor"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "image-processor"
      port: 3000
  selector:
    app: "dx-deployment-image-processor"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-node-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: persistence

apiVersion: "v1"
kind: "Service"
metadata:
  annotations:
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
  name: "dx-deployment-persistence-headless-svc"
  labels:
    app: "dx-deployment-persistence-node"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  clusterIP: "None"
  ports:
    - name: "persistence"
      port: 5432
  publishNotReadyAddresses: true
  selector:
    app: "dx-deployment-persistence-node"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: persistence

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-persistence"
  labels:
    app: "dx-deployment-persistence"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "persistence"
      port: 5432
  selector:
    app: "dx-deployment-persistence-connection-pool"
---
# Source: hcl-dx-deployment/templates/ring-api/ring-api-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: RingAPI

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-ring-api"
  annotations:
  labels:
    app: "dx-deployment-ring-api"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "ring-api"
      port: 3000
  selector:
    app: "dx-deployment-ring-api"
---
# Source: hcl-dx-deployment/templates/runtime-controller/runtime-controller-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: runtime-controller

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-runtime-controller"
  annotations:
  labels:
    app: "dx-deployment-runtime-controller"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "runtime-controller"
      port: 3000
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-service-headless.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: WebEngine

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-web-engine-headless"
  annotations:
  labels:
    app: "dx-deployment-web-engine-headless"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  clusterIP: "None"
  ports:
    - name: "dx-home"
      port: 9080
    - name: "dx-home-secure"
      port: 9443
  selector:
    app: "dx-deployment-web-engine"
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: WebEngine

apiVersion: "v1"
kind: "Service"
metadata:
  name: "dx-deployment-web-engine"
  annotations:
  labels:
    app: "dx-deployment-web-engine"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  type: "ClusterIP"
  ports:
    - name: "dx-home"
      port: 9080
    - name: "dx-home-secure"
      port: 9443
  selector:
    app: "dx-deployment-web-engine"
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Deployment
# For Service: People Service

apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
  labels:
    app: dx-deployment-peopleservice
    release: "dx-deployment"
    helm.sh/chart: peopleservice-1.0.0
    app.kubernetes.io/name: peopleservice
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "1.0.0"
    app.kubernetes.io/managed-by: Helm
  
  name: dx-deployment-peopleservice
spec:
  replicas: 1
  revisionHistoryLimit: 10
  strategy:
    type: RollingUpdate
    rollingUpdate: {}
  selector:
    matchLabels:
      app: dx-deployment-peopleservice
  template:
    metadata:
      name: dx-deployment-peopleservice
      annotations:
        checksum/env-vars-configmap: "ade07c353d8bde37b11b1f957542a84af2ca4dfc6ec3dec6dc206f79f5fd6508"
        checksum/database-secret: "02541d7d61622111e680d4bc03864e3babdfb57a3e330d04a92e28408452c4e9"
        checksum/jwt-secret: "9d728d799ff98e18f003859f863a062243d3b199a3362afd2103b3f9ab5e86ef"
        checksum/search-middleware-push-admin-secret: "0fa35989fd690b9eb5bea7a1f060de636437b379bbae35341bee76d22a44a8c0"
      labels:
        app: dx-deployment-peopleservice
        release: "dx-deployment"
        helm.sh/chart: peopleservice-1.0.0
        app.kubernetes.io/name: peopleservice
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "1.0.0"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      terminationGracePeriodSeconds: 10
      securityContext:
        fsGroup: 1000
        runAsUser: 1000
        runAsGroup: 1000
        runAsNonRoot: true
        supplementalGroups:
        - 1000
      containers:
        - name: dx-deployment-peopleservice
          image: dx-compose/people-service:v1.0.0_20251024-1349
          imagePullPolicy: IfNotPresent
          env:
            - name: node.name
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: PG_HOST
              value: 
            - name: PG_PORT
              value: "5432"
            - name: DB_NAME
              value: 
            - name: PG_USERNAME
              valueFrom:
                secretKeyRef:
                  name: dx-deployment-peopleservice-database
                  key: db-user
            - name: PG_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: dx-deployment-peopleservice-database
                  key: db-password
            - name: JWT_SECRET
              valueFrom:
                secretKeyRef:
                  name: dx-deployment-peopleservice-jwt
                  key: jwtSecret
          envFrom:
            - configMapRef:
                name: dx-deployment-peopleservice-env-vars-configmap
          ports:
            - name: http
              containerPort: 3000
              protocol: TCP
          livenessProbe: 
            failureThreshold: 10
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 15
            httpGet:
              path: /dx/api/people/v1/probes/health
              port: http
              scheme: HTTP
          readinessProbe: 
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 15
            successThreshold: 1
            timeoutSeconds: 10
            httpGet:
              path: /dx/api/people/v1/probes/ready
              port: http
              scheme: HTTP
          resources:
            requests:
              cpu: 250m
              memory: 256Mi
            limits:
              cpu: 1000m
              memory: 1024Mi
          volumeMounts:
          - name: "people-storage"
            mountPath: /data/people
        # Audit logging sidecar container
        # Sync logging sidecar container
      volumes:
      - name: people-storage
        persistentVolumeClaim:
          claimName: dx-deployment-peopleservice-data
---
# Source: hcl-dx-deployment/templates/content-composer/content-composer-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Deployment incl. Pods
# For Service: Content Composer

apiVersion: "apps/v1"
kind: "Deployment"
metadata:
  name: "dx-deployment-content-composer"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:  
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-content-composer"
  template:
    metadata:
      annotations:
        checksum/config-content-composer: "6eadf0ef23ef2943f85c0b444a645bfe1da133fa4302f2ae278fd856566dc19a"
        prometheus.io/scrape: "true"
        prometheus.io/path: "/probe/metrics"
        prometheus.io/port: "3000"
      labels:
        app: "dx-deployment-content-composer"
            # Using general labels, see _deployment_helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      containers:
        - name: "content-composer"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-content-composer:v1.44.0_20251024-1345"
          # Adjust the image pull policy based on the CHart value
          imagePullPolicy: IfNotPresent
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "MAINTENANCE_MODE"
              value: "false" 
          # Port exposure configuration
          ports:
            - name: "composer"
              containerPort: 3000
          # Liveness probe
          livenessProbe:
            httpGet:
              path: "/probe/live"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          # Readiness probe
          readinessProbe:
            httpGet:
              path: "/probe/ready"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 2
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "192Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "192Mi"
          volumeMounts:
          - name: "config"
            mountPath: "/etc/config"
          - name: "global-config"
            mountPath: "/etc/global-config"
      volumes:
        - name: "config"
          configMap:
            name: "dx-deployment-content-composer"
        - name: "global-config"
          configMap:
            name: "dx-deployment-global"
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

apiVersion: "apps/v1"
kind: "Deployment"
metadata:
  name: "dx-deployment-haproxy"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-haproxy"
  template:
    metadata:
      annotations:
        checksum/config-haproxy: "96584fec5b25afa4a8d6b0c0b20829c238b50a03adad512423550143c161a1e5"
        prometheus.io/scrape: "true"
        prometheus.io/path: "/metrics"
        prometheus.io/port: "8404"
      labels:
        app: "dx-deployment-haproxy"
            # Using general labels, see _deployment_helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      containers:
        - name: "haproxy"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-haproxy:v1.27.0_20251024-1338"
          livenessProbe:
            httpGet:
              path: "/"
              port: 10001
              scheme: "HTTP"
            failureThreshold: 4
            initialDelaySeconds: 0
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          readinessProbe:
            httpGet:
              path: "/"
              port: 10001
              scheme: "HTTP"
            failureThreshold: 2
            initialDelaySeconds: 0
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
          # Adjust the image pull policy based on the Chart value
          imagePullPolicy: IfNotPresent
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "MAINTENANCE_MODE"
              value: "false" 
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "200m"
              memory: "300Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "200m"
              memory: "300Mi"
          volumeMounts:
            - mountPath: /usr/local/etc/haproxy
              readOnly: true
              name: haproxy-conf
            - mountPath: /etc/ssl/certs
              readOnly: true
              name: haproxy-ssl
            - mountPath: "/etc/global-config"
              name: "global-config"
         # Port exposure configuration
          ports:
            - name: "haproxy"
              containerPort: 8081
            - name: "haproxy-socket"
              containerPort: 9999
            - name: "cw-admin-sec"
              containerPort: 10203
             
            - name: "metrics"
              containerPort: 8404
            
      volumes:
        - name: haproxy-conf
          configMap:
            name: "dx-deployment-haproxy"
            items:
              - key: dx.config.haproxy.cfg
                path: haproxy.cfg
        - name: haproxy-ssl
          secret:
            secretName: "dx-tls-cert"
            items:
              - key: tls.crt
                path: tls.crt
              # HAProxy expects the key for the certificate under the same path as <certificate-file-name>.key
              # Therefore we need this naming for the mount path of the item
              - key: tls.key
                path: tls.crt.key
        - name: "global-config"
          configMap:
            name: "dx-deployment-global"
---
# Source: hcl-dx-deployment/templates/image-processor/image-processor-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Deployment incl. Pods
# For Service: image-processor

apiVersion: "apps/v1"
kind: "Deployment"
metadata:
  name: "dx-deployment-image-processor"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-image-processor"
  template:
    metadata:
      annotations:
        checksum/config-image-processor: "1740aafa748cda567b52d1a55faa1ecc407e94c65b73d3cd393b943f704e64ad"
        checksum/auth-secret-image-processor: 9669808ae317947764f86968acd9ba0cdb4d22b99182b56a6672037309cdbbf9
        prometheus.io/scrape: "true"
        prometheus.io/path: "/probe/metrics"
        prometheus.io/port: "3000"
      labels:
        app: "dx-deployment-image-processor"
        # Using general labels, see _helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      containers:
        - name: "image-processor"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-image-processor:v1.44.0_20251024-1405"
          # Adjust the image pull policy based on the CHart value
          imagePullPolicy: "IfNotPresent"
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "PORT_v1"
              value: "3000"
            - name: "PLUGIN_API_AUTH_KEY"
              valueFrom:
                secretKeyRef:
                  key: "authenticationKey"
                  name: "dx-deployment-image-processor-authentication"
            - name: "MAINTENANCE_MODE"
              value: "false" 
          # Port exposure configuration
          ports:
            - name: "image-processor"
              containerPort: 3000
          # Liveness probe
          livenessProbe:
            httpGet:
              path: "/probe/live"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          # Readiness probe
          readinessProbe:
            httpGet:
              path: "/probe/ready"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 2
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "200m"
              memory: "2048Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "200m"
              memory: "2048Mi"
          volumeMounts:
          - name: "config"
            mountPath: "/etc/config"
          - name: "global-config"
            mountPath: "/etc/global-config"
      volumes:
        - name: "config"
          configMap:
            name: "dx-deployment-image-processor"
        - name: "global-config"
          configMap:
            name: "dx-deployment-global"
---
# Source: hcl-dx-deployment/templates/persistence/persistence-connection-pool-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Deployment incl. Pods
# For Service: persistence-connection-pool

apiVersion: "apps/v1"
kind: "Deployment"
metadata:
  name: "dx-deployment-persistence-connection-pool"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:  
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-persistence-connection-pool"
  template:
    metadata:
      annotations:
        checksum/config-persistence-connection-pool: "d0cb7704add46c98fecb280a249178a81a345806d2eb7fc0c809583947794d2b"
      labels:
        app: "dx-deployment-persistence-connection-pool"
            # Using general labels, see _deployment_helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      containers:
        - name: "persistence-connection-pool"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-persistence-connection-pool:v1.41.0_20251024-1356"
          # Adjust the image pull policy based on the CHart value
          imagePullPolicy: IfNotPresent
          # Add lifecycle hooks
          # Port exposure configuration
          ports:
            - name: "persistence"
              containerPort: 5432
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "MAINTENANCE_MODE"
              value: "false" 
            # Environment variable for new DB management mode
            - name: "NEW_DB_MANAGEMENT"
              value: "false"
          # PGPOOL Backend Nodes information. This will be created based on the number of Persistence Node replicas.
            - name: "PGPOOL_BACKEND_NODES"
            
            
              value: "0:dx-deployment-persistence-node-0.dx-deployment-persistence-headless-svc:5432,"
            - name: "PGPOOL_ADMIN_USERNAME"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-connection-pool-admin"
            - name: "PGPOOL_ADMIN_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-connection-pool-admin"
            - name: "PGPOOL_SR_CHECK_USER"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-replication"    
            - name: "PGPOOL_SR_CHECK_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-replication"
            - name: "PGPOOL_POSTGRES_USERNAME"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-user" 
            - name: "PGPOOL_POSTGRES_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-user"      
            - name: "PGPOOL_POSTGRES_CUSTOM_USERS"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-dam-user"  
            - name: "PGPOOL_POSTGRES_CUSTOM_PASSWORDS"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-dam-user"
          # Liveness probe
          livenessProbe:
            exec:
              command:
                - "/scripts/healthcheck.sh"
                - "liveness"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          # Readiness probe
          readinessProbe:
            exec:
              command:
                - "/scripts/healthcheck.sh"
                - "readiness"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "500m"
              memory: "512Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "500m"
              memory: "512Mi"
          volumeMounts:
          - name: "config"
            mountPath: "/etc/config"
          - name: "global-config"
            mountPath: "/etc/global-config"
      volumes:
        - name: "config"
          configMap:
            name: "dx-deployment-persistence-connection-pool"
        - name: "global-config"
          configMap:
            name: "dx-deployment-global"
---
# Source: hcl-dx-deployment/templates/ring-api/ring-api-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Deployment incl. Pods
# For Service: RingAPI

apiVersion: "apps/v1"
kind: "Deployment"
metadata:
  name: "dx-deployment-ring-api"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:  
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-ring-api"
  template:
    metadata:
      annotations:
        checksum/config-ring-api: "1e33500a75bf1696ce5ead9cf45a8ee381da53d94205e6e3d04e3d979e94ea5b"
        prometheus.io/scrape: "true"
        prometheus.io/path: "/probe/metrics"
        prometheus.io/port: "3000"
      labels:
        app: "dx-deployment-ring-api"
        # Using general labels, see _deployment_helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      containers:
        - name: "ring-api"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-ringapi:v1.44.0_20251024-1347"
          # Adjust the image pull policy based on the CHart value
          imagePullPolicy: "IfNotPresent"
          # Environment parameters
          env:
            - name: "NODE_TLS_REJECT_UNAUTHORIZED"
              value: "0"
            - name: TZ
              value: Europe/Madrid
            - name: "MAINTENANCE_MODE"
              value: "false"
          # CA Cert Changes  
          # Port exposure configuration
          ports:
            - name: "ring-api"
              containerPort: 3000
          # Liveness probe
          livenessProbe:
            httpGet:
              path: "/probe/live"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          # Readiness probe
          readinessProbe:
            httpGet:
              path: "/probe/ready"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 2
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "256Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "256Mi"
          volumeMounts:
          - name: "config"
            mountPath: "/etc/config"
          - name: "global-config"
            mountPath: "/etc/global-config"
          # Volume Mount for CA Cert
      volumes:
        - name: "config"
          configMap:
            name: "dx-deployment-ring-api"
        - name: "global-config"
          configMap:
            name: "dx-deployment-global"
        # only mount RING cert secret if specified in values.yaml
---
# Source: hcl-dx-deployment/templates/runtime-controller/runtime-controller-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Deployment incl. Pods
# For Service: runtime-controller

apiVersion: "apps/v1"
kind: "Deployment"
metadata:
  name: "dx-deployment-runtime-controller"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-runtime-controller"
  template:
    metadata:
      annotations:
        checksum/config: 05a75167d67a554d04ee5e27af44e700c40e93f2213bd2662e2eb46de56fa0d1
        hash/checksum: "4890f28ee947d1fe47a79a89143a5b6f53377e4008ec8a95e8c4e2498dd8fe06"
      labels:
        app: "dx-deployment-runtime-controller"
        # Using general labels, see _helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      serviceAccount: "dx-deployment-runtime-controller-digital-experience"
      serviceAccountName: "dx-deployment-runtime-controller-digital-experience"
      containers:
        - name: "runtime-controller"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-runtime-controller:v95_CF231_20251024-1351"
          # Adjust the image pull policy based on the CHart value
          imagePullPolicy: "IfNotPresent"
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "NAMESPACE"
              valueFrom:
                fieldRef:
                  fieldPath: "metadata.namespace"
            - name: "RELEASE"
              value: "dx-deployment"
            - name: "MAINTENANCE_MODE"
              value: "false" 
            # Environment variable for new DB management mode
            - name: "NEW_DB_MANAGEMENT"
              value: "false"
            - name: IMAGE_HASH
              value: "4890f28ee947d1fe47a79a89143a5b6f53377e4008ec8a95e8c4e2498dd8fe06"
          # Port exposure configuration
          ports:
            - name: "rc"
              containerPort: 3000
          # Liveness probe
          livenessProbe:
            httpGet:
              path: "/q/health/live"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          # Readiness probe
          readinessProbe:
            httpGet:
              path: "/q/health/ready"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 2
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "256Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "256Mi"
          volumeMounts:
          - name: "config"
            mountPath: "/etc/config"
          - name: "global-config"
            mountPath: "/etc/global-config"
      volumes:
        - name: "config"
          configMap:
            name: "dx-deployment-runtime-controller"
        - name: "global-config"
          configMap:
            name: "dx-deployment-global"
---
# Source: hcl-dx-deployment/templates/digital-asset-management/digital-asset-management-statefulset.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Statefulset incl. Pods and PVC for binaries
# For Service: Digital Asset Management

apiVersion: "apps/v1"
kind: "StatefulSet"
metadata:
  name: "dx-deployment-digital-asset-management"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:  
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-digital-asset-management"
  serviceName: "dx-deployment-digital-asset-management"
  template:
    metadata:
      annotations:
        checksum/config-digital-asset-management: "96845fe5bf0ba452226d4106357b7391d7ab3660e0663f4b71fb93ce41e1e728"
        checksum/credentials-search-middleware: "386004baaf484aa31f684779964e0e3c0cfb6dbb5b4b5f3039acb14a39c54031"
        checksum/credentials-dam-crud-user: "38785d5a3053eb144d40e217de51f58010410af4c2a7a9913c35c50fb36f6595"
        checksum/credentials-postgres-user: "8e13cdda7f185802b9a43d4050645dc1076233b531b03f51ac3c7bd2a37b31bf"
        prometheus.io/scrape: "true"
        prometheus.io/path: "/probe/metrics"
        prometheus.io/port: "3000"
      labels:
        app: "dx-deployment-digital-asset-management"
            # Using general labels, see _deployment_helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      securityContext:
        fsGroup: 1001
        runAsUser: 1000
        runAsGroup: 1001
        runAsNonRoot: true
        supplementalGroups:
        - 1001
      containers:
        - name: "digital-asset-management"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-digital-asset-manager:v1.43.0_20251024-1357"
          # Adjust the image pull policy based on the Chart value
          imagePullPolicy: "IfNotPresent"
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "PORT_v1"
              value: "3000"
            - name: "SEARCHMIDDLEWARE_PUSHADMIN_CREDENTIALS_CHECKSUM"
              value: "386004baaf484aa31f684779964e0e3c0cfb6dbb5b4b5f3039acb14a39c54031"
            - name: "POSTGRES_DB_USER"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-user"
            - name: "POSTGRES_DB_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-user"
            - name: "DAM_CRUD_USER"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-dam-user"
            - name: "DAM_CRUD_USER_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-dam-user"
            - name: "DAM_CRUD_USER_PREVIOUS_VALUE"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-dam-user-previous-value"
            - name: "DAM_CRUD_USER_PASSWORD_PREVIOUS_VALUE"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-dam-user-previous-value"
            - name: "DX_ADMIN"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-web-engine-wps"
            - name: "DX_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-web-engine-wps"
            - name: "MAINTENANCE_MODE"
              value: "false"
            # Environment variable for new DB management mode
            - name: "NEW_DB_MANAGEMENT"
              value: "false"
          # Port exposure configuration
          ports:
            - name: "dam"
              containerPort: 3000
          # Liveness probe
          livenessProbe:
            httpGet:
              path: "/probe/live"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          # Readiness probe
          readinessProbe:
            httpGet:
              path: "/probe/ready"
              port: 3000
              scheme: "HTTP"
            failureThreshold: 2
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "500m"
              memory: "1536Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "500m"
              memory: "1536Mi"
          volumeMounts:
          - name: "binaries"
            mountPath: "/opt/app/upload"
          - name: "config"
            mountPath: "/etc/config"
          - name: "global-config"
            mountPath: "/etc/global-config"
          - name: "staging"
            mountPath: "/etc/staging-secrets"
            readOnly: true
        - name: "prereqs-checker"
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-prereqs-checker:v1.0.0_20251024-1353"
          imagePullPolicy: "IfNotPresent"
          env:
          - name: "CHECK_SCHEDULE"
            value: "0 8 * * *"
          - name: "THRESHOLD_LATENCY_MS"
            value: "3"
          - name: "THRESHOLD_RANDOM_READ_IOPS"
            value: "1800"
          - name: "THRESHOLD_RANDOM_WRITE_IOPS"
            value: "600"
          - name: "THRESHOLD_SPACE_CONSUMED_PERCENT"
            value: "80"
          - name: "PERFORM_FILE_PERMISSION_CHECK"
            value: "true"
          - name: "PERFORM_SOFTLINK_HARDLINK_CHECK"
            value: "true"
          - name: "BINARIES_CAPACITY"
            value: "2Gi"
          - name: TZ
            value: Europe/Madrid
          - name: "MAINTENANCE_MODE"
            value: "false"
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "64Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "64Mi"
          volumeMounts:
          - name: "binaries"
            mountPath: "/mnt/prereqs-checks-volumes/binaries"
      volumes:
      - name: "binaries"
        persistentVolumeClaim:
          claimName: "dx-deployment-digital-asset-management"
      - name: "config"
        configMap:
          name: "dx-deployment-digital-asset-management"
      - name: "global-config"
        configMap:
          name: "dx-deployment-global"
      - name: "staging"
        secret:
          secretName: "dx-deployment-dam-staging"
          # dam staging secret is optional and will be created while registering the DAM staging sync
          optional: true
      # only mount DAM cert secret if specified in values.yaml
---
# Source: hcl-dx-deployment/templates/persistence/persistence-node-statefulset.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: StatefulSet incl. Pods and PVC for database
# For Service: PG Replication Manager Read Write

apiVersion: "apps/v1"
kind: "StatefulSet"
metadata:
  name: "dx-deployment-persistence-node"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:  
  replicas: 1

  selector:
    matchLabels:
      app: "dx-deployment-persistence-node"
  serviceName: "dx-deployment-persistence-headless-svc"
  # Per pod volume claims
  volumeClaimTemplates:
    # Database PVC
    - metadata:
        name: "database"
      spec:
        accessModes: 
          - "ReadWriteOnce"
        resources:
          requests:
            storage: 2Gi
        storageClassName:  dx-deploy-rwo
        
        
  template:
    metadata:
      annotations:
        # Checksum annotations are only used in old DB management mode
        checksum/config-persistence-node: "d7fa8ed2c05e9bde23660863aa8343aa1f6b6f9c40bccd912933d9adf644baf0"
        checksum/custom-secret-db-user: "8e13cdda7f185802b9a43d4050645dc1076233b531b03f51ac3c7bd2a37b31bf"
        checksum/custom-secret-replication-user: "f734e3f9c68b034a74c1559436f839f71623fcef147ff44c38383bbad526dcdd"
        prometheus.io/path: "/metrics"
        prometheus.io/port: "9187"
        prometheus.io/scrape: "true"
      labels:
        app: "dx-deployment-persistence-node"
            # Using general labels, see _helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      terminationGracePeriodSeconds: 10
      securityContext:
        fsGroup: 1001
        runAsUser: 1000
        runAsGroup: 1001
        runAsNonRoot: true
        supplementalGroups:
        - 1001
      containers:
        - name: "persistence-node"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-persistence-node:v1.31_20251024-1354"
          # Adjust the image pull policy based on the Chart value
          imagePullPolicy: "IfNotPresent"
          # Add lifecycle hooks
          # Environment parameters
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "REPMGR_HEADLESS_SVC"
              value: "dx-deployment-persistence-headless-svc.digital-experience.svc.cluster.local"
            - name: "REPMGR_PARTNER_NODES"
              
              
              value: "dx-deployment-persistence-node-0;"
            - name: "POSTGRES_USER"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-user"
            - name: "POSTGRES_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-user"
            - name: "POSTGRES_USER_PREVIOUS_VALUE"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-user-previous-value"
            - name: "POSTGRES_PASSWORD_PREVIOUS_VALUE"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-user-previous-value"
            - name: "POSTGRES_REPLICATION_USER"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-replication"
            - name: "POSTGRES_REPLICATION_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-replication"
            - name: "POSTGRES_REPLICATION_USER_PREVIOUS_VALUE"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-replication-previous-value"
            - name: "POSTGRES_REPLICATION_PASSWORD_PREVIOUS_VALUE"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-replication-previous-value"
            - name: "DAM_USER"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-dam-user"
            - name: "MAINTENANCE_MODE"
              value: "false" 
            # Environment variable for new DB management mode
            - name: "NEW_DB_MANAGEMENT"
              value: "false"
          # Port exposure configuration
          ports:
            - name: "persistence"
              containerPort: 5432
          # Liveness probe
          livenessProbe:
            exec:
              command:
                - "/live.sh"
            failureThreshold: 4
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          # Readiness probe
          readinessProbe:
            exec:
              command:
                - "/ready.sh"
            failureThreshold: 2
            initialDelaySeconds: 30
            periodSeconds: 30
            successThreshold: 1
            timeoutSeconds: 30
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "500m"
              memory: "1024Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "500m"
              memory: "1024Mi"
          volumeMounts:
          - name: "database"
            mountPath: "/var/lib/pgsql/11/data"
          - name: "config"
            mountPath: "/etc/config"
          - name: "global-config"
            mountPath: "/etc/global-config"
        # Sidecar container that exports the prometheus compatible metrics of the postgres node
        - name: "persistence-metrics-exporter"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-persistence-metrics-exporter:v1.39.0_20251024-1357"
          # Adjust the image pull policy based on the Chart value
          imagePullPolicy: "IfNotPresent"
          # Environment parameters
          env:
            - name: TZ
              value: Europe/Madrid
            - name: DATA_SOURCE_URI
              value: "127.0.0.1:5432/dxmediadb?sslmode=disable"
            - name: "DATA_SOURCE_PASS"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-persistence-user"
            - name: "DATA_SOURCE_USER"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-persistence-user"
            - name: "MAINTENANCE_MODE"
              value: "false" 
          # Port exposure configuration
          ports:
            - name: metrics
              containerPort: 9187
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "128Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "128Mi"
        - name: "persistence-repmgr-log"
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-logging-sidecar:v1.0.0_20251024-1349"
          imagePullPolicy: "IfNotPresent"
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "MAINTENANCE_MODE"
              value: "false"
          command: ["/bin/sh"]
          args: ["-c", "find_and_tail.sh '/var/lib/pgsql/11/data/16/data/dx/repmgr/log/repmgr.log'"]
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "64Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "64Mi"
          volumeMounts:
            - name: "database"
              mountPath: "/var/lib/pgsql/11/data"
        - name: "prereqs-checker"
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-prereqs-checker:v1.0.0_20251024-1353"
          imagePullPolicy: "IfNotPresent"
          env:
          - name: TZ
            value: Europe/Madrid
          - name: "CHECK_SCHEDULE"
            value: "0 8 * * *"
          - name: "THRESHOLD_LATENCY_MS"
            value: "3"
          - name: "THRESHOLD_RANDOM_READ_IOPS"
            value: "1800"
          - name: "THRESHOLD_RANDOM_WRITE_IOPS"
            value: "600"
          - name: "THRESHOLD_SPACE_CONSUMED_PERCENT"
            value: "80"
          - name: "PERFORM_FILE_PERMISSION_CHECK"
            value: "true"
          - name: "PERFORM_SOFTLINK_HARDLINK_CHECK"
            value: "true"
          - name: "DATABASE_CAPACITY"
            value: "2Gi"
          - name: "MAINTENANCE_MODE"
            value: "false" 
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "64Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "64Mi"
          volumeMounts:
          - name: "database"
            mountPath: "/mnt/prereqs-checks-volumes/database"
      volumes:
      - name: "config"
        configMap:
          name: "dx-deployment-persistence-node"
      - name: "global-config"
        configMap:
          name: "dx-deployment-global"
      # Only mount the replication user secret if we are in new DB management mode
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-statefulset.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: StatefulSet incl. Pods and PVC for transaction logs
# For Service: WebEngine

apiVersion: "apps/v1"
kind: "StatefulSet"
metadata:
  name: "dx-deployment-web-engine"
  labels:
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
spec:  
  replicas: 1
  selector:
    matchLabels:
      app: "dx-deployment-web-engine"
  serviceName: "dx-deployment-web-engine"
  # Per pod volume claims
  volumeClaimTemplates:
    # Customization PVC
    - metadata:
        name: "customization"
      spec:
        accessModes: 
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "500Mi"
        storageClassName:  "dx-deploy-rwo"
        
        
    # Application log PVC
    - metadata:
        name: "log"
      spec:
        accessModes: 
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "250Mi"
        storageClassName:  "dx-deploy-rwo"
        
        
  template:
    metadata:
      annotations:
        checksum/config-web-engine: "cdb2e6f1adb12077860639d11e216b48afb820b18dd594a78a0f0764e78188f3"
        checksum/dbdomain-properties: "148bffcc4329a440766dd9779b3dded2f79c23d727516e7995cdd223721b2aa7"
        checksum/dbtype-properties: "688ea2582a92999f1a58aa4c032a751e137501c0de4551bb212e786f1c94dd1c"
        checksum/jvm-options: "90ad34cde9cac98063bf448c970d61b4d277aa4957c1f2dcbcaa2554ed13c9b3"
        checksum/properties-overrides: "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
        prometheus.io/scrape: "true"
        prometheus.io/path: "/metrics"
        prometheus.io/port: "9091"
      labels:
        app: "dx-deployment-web-engine"
            # Using general labels, see _deployment_helpers.tpl
        release: "dx-deployment"
        helm.sh/chart: hcl-dx-deployment-2.42.1
        app.kubernetes.io/name: hcl-dx-deployment
        app.kubernetes.io/instance: dx-deployment
        app.kubernetes.io/version: "95_CF231"
        app.kubernetes.io/managed-by: Helm
    spec:
      imagePullSecrets:
      # WebEngine termination grace period
      # Allows WebEngine to stop all JVMs
      terminationGracePeriodSeconds: 180
      securityContext:
        fsGroup: 1001
        runAsUser: 1000
        runAsGroup: 1001
        runAsNonRoot: true
        supplementalGroups:
        - 1001
      containers:
        - name: "web-engine"
          # Build the image attribute by using the repository and image tag
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-webengine:CF231_20251025-2351"
          # Adjust the image pull policy based on the Chart value
          imagePullPolicy: "IfNotPresent"
          # Environment parameters
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "CONFIG_CHECKSUM"
              value: "cdb2e6f1adb12077860639d11e216b48afb820b18dd594a78a0f0764e78188f3"
            - name: "DX_ADMIN"
              valueFrom:
                secretKeyRef:
                  key: "username"
                  name: "dx-deployment-web-engine-wps"
            - name: "DX_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "password"
                  name: "dx-deployment-web-engine-wps"
            - name: "AI_ENABLED"
              value: "false"
            - name: "NEW_CONTEXT_ROOT"
              value: "wps"
            # AI API Key configuration
            - name: "LDAP_BIND_USER"
              valueFrom:
                secretKeyRef:
                  key: "bindUser"
                  name: "dx-deployment-web-engine-ldap"
            - name: "LDAP_BIND_PASSWORD"
              valueFrom:
                secretKeyRef:
                  key: "bindPassword"
                  name: "dx-deployment-web-engine-ldap"
            # OpenSearch search middleware enabled or not
            - name: "WEBENGINE_NEWSEARCH_ENABLED"
              value: "false"
            # Maintenace mode setting
            - name: "MAINTENANCE_MODE"
              value: "false"
          # Port exposure configuration
          ports:
            - name: "dx-home"
              containerPort: 9080
            - name: "dx-home-sec"
              containerPort: 9443
            - name: "web-engine-soap"
              containerPort: 10033
          # Liveness probe
          livenessProbe:
            exec:
              command:
              - /bin/sh
              - /opt/openliberty/wlp/usr/svrcfg/scripts/probe/liveness.sh
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 10
          # Readiness probe
          readinessProbe:
            exec:
              command:
              - /bin/sh
              - /opt/openliberty/wlp/usr/svrcfg/scripts/probe/readiness.sh
            failureThreshold: 1
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 30
          # Startup probe
          startupProbe:
            exec:
              command:
              - /bin/sh
              - /opt/openliberty/wlp/usr/svrcfg/scripts/probe/liveness.sh
            failureThreshold: 360
            initialDelaySeconds: 30
            periodSeconds: 20
            successThreshold: 1
            timeoutSeconds: 10
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "2000m"
              memory: "4096Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "4000m"
              memory: "6144Mi"
          volumeMounts:
          - name: "customization"
            mountPath: "/opt/openliberty/wlp/usr/servers/defaultServer/customization"
          - name: "log"
            mountPath: "/opt/openliberty/wlp/usr/servers/defaultServer/logs"
          - name: "config"
            mountPath: "/etc/config"
          - name: "overrides"
            mountPath: /opt/openliberty/wlp/usr/servers/defaultServer/configDropins/overrides
            readOnly: true
          - name: "properties-overrides"
            mountPath: /opt/openliberty/wlp/usr/servers/defaultServer/properties-overrides
            readOnly: true
          - name: "jvm-options"
            mountPath: /opt/openliberty/wlp/usr/servers/defaultServer/jvm.options
            subPath: jvm.options
          - name: "global-config"
            mountPath: "/etc/global-config"
          - name: "dbdomain"
            mountPath: "/opt/openliberty/wlp/usr/svrcfg/properties/dx_dbdomain.properties"
            subPath: dx_dbdomain.properties
          - name: "dbtype"
            mountPath: "/opt/openliberty/wlp/usr/svrcfg/properties/dx_dbtype.properties"
            subPath: dx_dbtype.properties
          # Truststore Secrets Mount
          - name: "truststore-secret-ca-secret-1"
            mountPath: "/mnt/certs/truststores/ca-secret-1"
        # Default logging sidecar containers 
        - name: "system-out-log"
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-logging-sidecar:v1.0.0_20251024-1349"
          imagePullPolicy: "IfNotPresent"
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "MAINTENANCE_MODE"
              value: "false"
          command: ["/bin/sh"]
          args: ["-c", "find_and_tail.sh '/var/logs/SystemOut.log'"]
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "64Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "64Mi"
          volumeMounts:
          - name: "log"
            mountPath: "/var/logs"
        - name: "trace-log"
          image: "image-registry.openshift-image-registry.svc:5000/openshift/dx-logging-sidecar:v1.0.0_20251024-1349"
          imagePullPolicy: "IfNotPresent"
          env:
            - name: TZ
              value: Europe/Madrid
            - name: "MAINTENANCE_MODE"
              value: "false"
          command: ["/bin/sh"]
          args: ["-c", "find_and_tail.sh '/var/logs/trace.log'"]
          resources:
            # Resource requests taken from value settings
            requests:
              cpu: "100m"
              memory: "64Mi"
            # Resource limits taken from value settings
            limits:
              cpu: "100m"
              memory: "64Mi"
          volumeMounts:
          - name: "log"
            mountPath: "/var/logs"
        # Additional custom logging sidecar containers  (dynamically created from values)
        
        
        
        
      volumes:
      - name: "customization"
        persistentVolumeClaim:
          claimName: "dx-deployment-web-engine-customization"
      - name: "config"
        configMap:
          name: "dx-deployment-web-engine"
      - name: "overrides"
        configMap:
          name: "dx-deployment-web-engine-overrides"
      - name: "properties-overrides"
        configMap:
          name: "dx-deployment-web-engine-properties-overrides"
      - name: "jvm-options"
        configMap:
          name: "dx-deployment-web-engine-jvm-options"
      - name: "global-config"
        configMap:
          name: "dx-deployment-global"
      - name: "dbdomain"
        secret:
          secretName: "dx-deployment-web-engine-dbdomain"
      - name: "dbtype"
        secret:
          secretName: "dx-deployment-web-engine-dbtype"
      - name: truststore-secret-ca-secret-1
        secret:
          secretName: dx-custom-certs
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/custom-pvcs.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: PersistentVolumeClaim
# For Service: People Service
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: People Service
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/ldap-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret
# For Service: People Service
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/oidc-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret
# For Service: People Service
---
# Source: hcl-dx-deployment/charts/peopleservice/templates/search-middleware-push-admin-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret for push admin user
# For Service: Search Middleware
---
# Source: hcl-dx-deployment/templates/content-composer/content-composer-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: content-composer
---
# Source: hcl-dx-deployment/templates/content-composer/content-composer-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: Content Composer
---
# Source: hcl-dx-deployment/templates/core/core-ai-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2023. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for AI configuration
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-configwizard-secret-previous-value.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2023. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for Config Wizard user with previous values
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-configwizard-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2023, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for Config Wizard user
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-custom-pvcs.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: PersistentVolumeClaim
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: core
---
# Source: hcl-dx-deployment/templates/core/core-ldap-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for LDAP configuration
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-ltpa-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2023 All Rights Reserved.  *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for LTPA configuration
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-pvc.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: PersistentVolumeClaim
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-service-headless.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-statefulset.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: StatefulSet incl. Pods and PVC for transaction logs
# For Service: core
---
# Source: hcl-dx-deployment/templates/core/core-unready-service-headless.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2023. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-unready-service-pod-0.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2023. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-wasadmin-secret-previous-value.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for wasadmin user with previous values
# For Service: Core
---
# Source: hcl-dx-deployment/templates/core/core-wpsadmin-wasadmin-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# Get generate random password for fresh install
---
# Source: hcl-dx-deployment/templates/dam-plugin-google-vision/dam-plugin-google-vision-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: DAM Plugin Google Vision
---
# Source: hcl-dx-deployment/templates/dam-plugin-google-vision/dam-plugin-google-vision-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Deployment incl. Pods
# For Service: DAM Plugin Google Vision
---
# Source: hcl-dx-deployment/templates/dam-plugin-google-vision/dam-plugin-google-vision-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: dam-plugin-google-vision
---
# Source: hcl-dx-deployment/templates/dam-plugin-google-vision/dam-plugin-google-vision-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret for DAM Google Vision plugin API
# For Service: dam-plugin-google-vision
---
# Source: hcl-dx-deployment/templates/dam-plugin-google-vision/dam-plugin-google-vision-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: dam-plugin-google-vision
---
# Source: hcl-dx-deployment/templates/dam-plugin-google-vision/dam-plugin-google-vision-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: dam-plugin-google-vision
---
# Source: hcl-dx-deployment/templates/dam-plugin-kaltura/dam-plugin-kaltura-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: DAM Kaltura Plugin
---
# Source: hcl-dx-deployment/templates/dam-plugin-kaltura/dam-plugin-kaltura-deployment.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Deployment incl. Pods
# For Service: DAM Kaltura Plugin
---
# Source: hcl-dx-deployment/templates/dam-plugin-kaltura/dam-plugin-kaltura-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: DAM kaltura Plugin
---
# Source: hcl-dx-deployment/templates/dam-plugin-kaltura/dam-plugin-kaltura-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret for DAM Kaltura plugin API
# For Service: DAM Kaltura Plugin
---
# Source: hcl-dx-deployment/templates/dam-plugin-kaltura/dam-plugin-kaltura-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: DAM kaltura Plugin
---
# Source: hcl-dx-deployment/templates/dam-plugin-kaltura/dam-plugin-kaltura-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: DAM Kaltura Plugin
---
# Source: hcl-dx-deployment/templates/digital-asset-management/digital-asset-management-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: digital-asset-management
---
# Source: hcl-dx-deployment/templates/digital-asset-management/digital-asset-management-search-push-admin-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Secret for push admin user
# For Service: Search Middleware
---
# Source: hcl-dx-deployment/templates/digital-asset-management/digital-asset-management-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: Digital Asset Management
---
# Source: hcl-dx-deployment/templates/dx-shared-config-core.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2025. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This Secret contains shared configuration for the Core application.
# It is only created if both enableConfigurationSharing and hcl-dx-deployment.coreEnabled are true.
---
# Source: hcl-dx-deployment/templates/dx-shared-config-webengine.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2025. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This Secret contains shared configuration for the WebEngine application.
# It is only created if both enableConfigurationSharing and hcl-dx-deployment.webEngineEnabled are true.
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: haproxy
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-mapping.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Mapping
# For Service: HAProxy
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-service-internal.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: HAProxy
# This Service is only used when internal calls are routed through HAProxy.
# This makes sure that a custom servicePort for the main service does not break the internal calls.
# We use the dxHomeSecure port for the servicePort to not cause any undefined virtual host errors in Core
---
# Source: hcl-dx-deployment/templates/haproxy/haproxy-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: HAProxy
---
# Source: hcl-dx-deployment/templates/image-processor/image-processor-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: image-processor
---
# Source: hcl-dx-deployment/templates/image-processor/image-processor-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: image-processor
---
# Source: hcl-dx-deployment/templates/license-manager/license-manager-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: License Manager
---
# Source: hcl-dx-deployment/templates/license-manager/license-manager-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: License Manager
---
# Source: hcl-dx-deployment/templates/license-manager/license-manager-statefulset.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: StatefulSet incl. Pods and PVC for database
# For Service: License-Manager
---
# Source: hcl-dx-deployment/templates/open-ldap/open-ldap-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: open-ldap
---
# Source: hcl-dx-deployment/templates/open-ldap/open-ldap-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for admin user
# For Service: open-ldap
---
# Source: hcl-dx-deployment/templates/open-ldap/open-ldap-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: open-ldap
---
# Source: hcl-dx-deployment/templates/open-ldap/open-ldap-statefulset.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: StatefulSet incl. Pods
# For Service: open-ldap
---
# Source: hcl-dx-deployment/templates/persistence/persistence-node-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: persistence
---
# Source: hcl-dx-deployment/templates/remote-search/remote-search-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Core
---
# Source: hcl-dx-deployment/templates/remote-search/remote-search-service.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: Service
# For Service: remote-search
---
# Source: hcl-dx-deployment/templates/remote-search/remote-search-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: remote-search
---
# Source: hcl-dx-deployment/templates/remote-search/remote-search-statefulset.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: StatefulSet incl. Pods and PVC for database
# For Service: remote-search
---
# Source: hcl-dx-deployment/templates/remote-search/remote-search-wasadmin-secret-previous-value.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2023. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for wasadmin user with previous values
# For Service: Remote Search
---
# Source: hcl-dx-deployment/templates/remote-search/remote-search-wasadmin-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2022, 2024. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
 
# This template creates:
# Resources: Secret for wasadmin user
# For Service: Remote Search
---
# Source: hcl-dx-deployment/templates/ring-api/ring-api-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: ring-api
---
# Source: hcl-dx-deployment/templates/ring-api/ring-api-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: RingAPI
---
# Source: hcl-dx-deployment/templates/sofy-config.yaml
#*
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021, 2025. All Rights Reserved. *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************
#*
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-custom-pvcs.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: PersistentVolumeClaim
# For Service: WebEngine
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-hpa.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: HorizontalPodAutoscaler
# For Service: WebEngine
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-servicemonitor.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 202. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ServiceMonitor
# For Service: WebEngine
---
# Source: hcl-dx-deployment/templates/web-engine/web-engine-wpsadmin-admin-user-secret.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2024. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# Get generate random password for fresh install# This Helm template creates a Kubernetes Secret for the `wpsadmin` user.
# The Secret is only created if either the web engine is enabled
---
# Source: hcl-dx-deployment/templates/persistence/persistence-configmap.yaml
#********************************************************************
#* Licensed Materials - Property of HCL                             *
#*                                                                  *
#* Copyright HCL Technologies Ltd. 2021. All Rights Reserved.       *
#*                                                                  *
#* Note to US Government Users Restricted Rights:                   *
#*                                                                  *
#* Use, duplication or disclosure restricted by GSA ADP Schedule    *
#********************************************************************

# This template creates:
# Resources: ConfigMap
# For Service: Persistence

apiVersion: "v1"
kind: "ConfigMap"
metadata:
  name: "dx-deployment-persistence"
  labels:
    app: "dx-deployment-persistence"
    # Using general labels, see _deployment_helpers.tpl
    release: "dx-deployment"
    helm.sh/chart: hcl-dx-deployment-2.42.1
    app.kubernetes.io/name: hcl-dx-deployment
    app.kubernetes.io/instance: dx-deployment
    app.kubernetes.io/version: "95_CF231"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": pre-upgrade
    "helm.sh/hook-weight": "-5"
data:
  "dam.config.dam.persistence.postgres_db": "dxmediadb"
  "dam.config.dam.persistence.system": ""
